{
    "pipes": [],
    "interfaces": [
        {
            "name": "AnimationConfig",
            "id": "interface-AnimationConfig-7d678a89f92747d2fa4b0f051c91c6bd8aa8b5d8005f0a99b6e64b751429438bac72f1d9d2461f75fbfc8676ca1e28aa6acdae9d7b7a3feda2327c9df57142d2",
            "file": "src/app/components/map-container/models/map.types.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { GeoProjection } from 'd3-geo';\r\nimport { FeatureCollection } from 'geojson';\r\n\r\nexport type RenderMode = 'svg' | 'canvas';\r\n\r\nexport interface MapConfig {\r\n  projection: GeoProjection;\r\n  width: number;\r\n  height: number;\r\n  renderMode: RenderMode;\r\n}\r\n\r\nexport interface GeoBounds {\r\n  minLon: number;\r\n  maxLon: number;\r\n  minLat: number;\r\n  maxLat: number;\r\n}\r\n\r\nexport interface MapExtent {\r\n  center: [number, number]; // [longitude, latitude]\r\n  scale: number;\r\n}\r\n\r\nexport interface AnimationConfig {\r\n  duration: number; // milliseconds\r\n  easing?: (t: number) => number;\r\n}\r\n\r\nexport interface ZoomConfig {\r\n  scaleExtent: [number, number]; // [min, max]\r\n  translateExtent?: [[number, number], [number, number]];\r\n}\r\n\r\nexport interface MapData {\r\n  type: 'geojson' | 'vector-tile' | 'raster-tile';\r\n  data: FeatureCollection;\r\n}\r\n\r\nexport interface ZoomEvent {\r\n  scale: number;\r\n  translate: [number, number];\r\n  center: [number, number];\r\n}\r\n",
            "properties": [
                {
                    "name": "duration",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 26
                },
                {
                    "name": "easing",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "function",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 27
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "AnimationSequence",
            "id": "interface-AnimationSequence-d1e39c33c593a759b3167b671d47d42ea11f778e5dab62fb4109015aaea16ce7acb7350409bff0428d6c68efd36d1aab3b285d30fca4e2e31938ced1d37ebb6d",
            "file": "src/app/components/map-container/services/animation-controller.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable } from '@angular/core';\r\nimport * as d3 from 'd3';\r\nimport { Subject } from 'rxjs';\r\nimport { AnimationConfig, MapExtent } from '../models/map.types';\r\nimport { GeoZoomService } from './geo-zoom.service';\r\n\r\nexport interface AnimationStep {\r\n  extent: MapExtent;\r\n  duration: number;\r\n  label?: string;\r\n}\r\n\r\nexport interface AnimationSequence {\r\n  steps: AnimationStep[];\r\n  loop?: boolean;\r\n}\r\n\r\n/**\r\n * Animation Controller Service\r\n * Handles programmatic animations between map extents\r\n */\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AnimationControllerService {\r\n  private currentSequence?: AnimationSequence;\r\n  private currentStepIndex = 0;\r\n  private isPlaying = false;\r\n  private frameCount = 0;\r\n  private lastFrameTime = 0;\r\n  private fps = 0;\r\n\r\n  // Observables\r\n  public onAnimationStart = new Subject<void>();\r\n  public onAnimationEnd = new Subject<void>();\r\n  public onStepChange = new Subject<{ step: number; total: number }>();\r\n  public onFpsUpdate = new Subject<number>();\r\n\r\n  constructor(private geoZoomService: GeoZoomService) {}\r\n\r\n  /**\r\n   * Play an animation sequence\r\n   */\r\n  playSequence(element: Element, sequence: AnimationSequence): void {\r\n    this.currentSequence = sequence;\r\n    this.currentStepIndex = 0;\r\n    this.isPlaying = true;\r\n\r\n    this.onAnimationStart.next();\r\n    this.executeStep(element);\r\n  }\r\n\r\n  /**\r\n   * Execute a single animation step\r\n   */\r\n  private executeStep(element: Element): void {\r\n    if (!this.currentSequence || !this.isPlaying) return;\r\n\r\n    const step = this.currentSequence.steps[this.currentStepIndex];\r\n    if (!step) {\r\n      this.handleSequenceEnd(element);\r\n      return;\r\n    }\r\n\r\n    this.onStepChange.next({\r\n      step: this.currentStepIndex + 1,\r\n      total: this.currentSequence.steps.length,\r\n    });\r\n\r\n    // Start FPS monitoring\r\n    this.startFpsMonitoring();\r\n\r\n    // Animate to the extent\r\n    this.animateToExtent(element, step.extent, step.duration, () => {\r\n      // Stop FPS monitoring\r\n      this.stopFpsMonitoring();\r\n\r\n      // Move to next step\r\n      this.currentStepIndex++;\r\n      setTimeout(() => this.executeStep(element), 500); // Brief pause between steps\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Animate to a specific map extent\r\n   */\r\n  animateToExtent(\r\n    element: Element,\r\n    extent: MapExtent,\r\n    duration: number,\r\n    callback?: () => void\r\n  ): void {\r\n    const { center, scale } = extent;\r\n\r\n    // Animate projection to center and scale\r\n    this.geoZoomService.animateTo(center, scale, duration, callback);\r\n  }\r\n\r\n  /**\r\n   * Animate between two extents with custom easing\r\n   */\r\n  animateBetweenExtents(\r\n    element: Element,\r\n    from: MapExtent,\r\n    to: MapExtent,\r\n    config: AnimationConfig,\r\n    callback?: () => void\r\n  ): void {\r\n    const easing = config.easing || d3.easeCubicInOut;\r\n    const startTime = Date.now();\r\n\r\n    const interpolateScale = d3.interpolateNumber(from.scale, to.scale);\r\n    const interpolateCenter = d3.interpolate(from.center, to.center);\r\n\r\n    const tick = () => {\r\n      const elapsed = Date.now() - startTime;\r\n      const t = Math.min(elapsed / config.duration, 1);\r\n      const easedT = easing(t);\r\n\r\n      const currentScale = interpolateScale(easedT);\r\n      const currentCenter = interpolateCenter(easedT) as [number, number];\r\n\r\n      this.animateToExtent(element, { scale: currentScale, center: currentCenter }, 0);\r\n\r\n      if (t < 1) {\r\n        requestAnimationFrame(tick);\r\n      } else {\r\n        callback?.();\r\n      }\r\n    };\r\n\r\n    requestAnimationFrame(tick);\r\n  }\r\n\r\n  /**\r\n   * Handle sequence end\r\n   */\r\n  private handleSequenceEnd(element: Element): void {\r\n    if (this.currentSequence?.loop) {\r\n      this.currentStepIndex = 0;\r\n      setTimeout(() => this.executeStep(element), 1000);\r\n    } else {\r\n      this.stop();\r\n      this.onAnimationEnd.next();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop the current animation\r\n   */\r\n  stop(): void {\r\n    this.isPlaying = false;\r\n    this.currentStepIndex = 0;\r\n    this.stopFpsMonitoring();\r\n  }\r\n\r\n  /**\r\n   * Pause the current animation\r\n   */\r\n  pause(): void {\r\n    this.isPlaying = false;\r\n  }\r\n\r\n  /**\r\n   * Resume the paused animation\r\n   */\r\n  resume(element: Element): void {\r\n    if (this.currentSequence && !this.isPlaying) {\r\n      this.isPlaying = true;\r\n      this.executeStep(element);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Start monitoring FPS\r\n   */\r\n  private startFpsMonitoring(): void {\r\n    this.frameCount = 0;\r\n    this.lastFrameTime = performance.now();\r\n    this.monitorFps();\r\n  }\r\n\r\n  /**\r\n   * Monitor FPS during animation\r\n   */\r\n  private monitorFps(): void {\r\n    if (!this.isPlaying) return;\r\n\r\n    const currentTime = performance.now();\r\n    this.frameCount++;\r\n\r\n    // Calculate FPS every 500ms\r\n    if (currentTime - this.lastFrameTime >= 500) {\r\n      this.fps = Math.round((this.frameCount * 1000) / (currentTime - this.lastFrameTime));\r\n      this.onFpsUpdate.next(this.fps);\r\n\r\n      this.frameCount = 0;\r\n      this.lastFrameTime = currentTime;\r\n    }\r\n\r\n    requestAnimationFrame(() => this.monitorFps());\r\n  }\r\n\r\n  /**\r\n   * Stop monitoring FPS\r\n   */\r\n  private stopFpsMonitoring(): void {\r\n    this.fps = 0;\r\n    this.frameCount = 0;\r\n  }\r\n\r\n  /**\r\n   * Get current FPS\r\n   */\r\n  getCurrentFps(): number {\r\n    return this.fps;\r\n  }\r\n\r\n  /**\r\n   * Check if animation is playing\r\n   */\r\n  isAnimationPlaying(): boolean {\r\n    return this.isPlaying;\r\n  }\r\n}\r\n",
            "properties": [
                {
                    "name": "loop",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 15
                },
                {
                    "name": "steps",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "AnimationStep[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 14
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "AnimationStep",
            "id": "interface-AnimationStep-d1e39c33c593a759b3167b671d47d42ea11f778e5dab62fb4109015aaea16ce7acb7350409bff0428d6c68efd36d1aab3b285d30fca4e2e31938ced1d37ebb6d",
            "file": "src/app/components/map-container/services/animation-controller.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable } from '@angular/core';\r\nimport * as d3 from 'd3';\r\nimport { Subject } from 'rxjs';\r\nimport { AnimationConfig, MapExtent } from '../models/map.types';\r\nimport { GeoZoomService } from './geo-zoom.service';\r\n\r\nexport interface AnimationStep {\r\n  extent: MapExtent;\r\n  duration: number;\r\n  label?: string;\r\n}\r\n\r\nexport interface AnimationSequence {\r\n  steps: AnimationStep[];\r\n  loop?: boolean;\r\n}\r\n\r\n/**\r\n * Animation Controller Service\r\n * Handles programmatic animations between map extents\r\n */\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AnimationControllerService {\r\n  private currentSequence?: AnimationSequence;\r\n  private currentStepIndex = 0;\r\n  private isPlaying = false;\r\n  private frameCount = 0;\r\n  private lastFrameTime = 0;\r\n  private fps = 0;\r\n\r\n  // Observables\r\n  public onAnimationStart = new Subject<void>();\r\n  public onAnimationEnd = new Subject<void>();\r\n  public onStepChange = new Subject<{ step: number; total: number }>();\r\n  public onFpsUpdate = new Subject<number>();\r\n\r\n  constructor(private geoZoomService: GeoZoomService) {}\r\n\r\n  /**\r\n   * Play an animation sequence\r\n   */\r\n  playSequence(element: Element, sequence: AnimationSequence): void {\r\n    this.currentSequence = sequence;\r\n    this.currentStepIndex = 0;\r\n    this.isPlaying = true;\r\n\r\n    this.onAnimationStart.next();\r\n    this.executeStep(element);\r\n  }\r\n\r\n  /**\r\n   * Execute a single animation step\r\n   */\r\n  private executeStep(element: Element): void {\r\n    if (!this.currentSequence || !this.isPlaying) return;\r\n\r\n    const step = this.currentSequence.steps[this.currentStepIndex];\r\n    if (!step) {\r\n      this.handleSequenceEnd(element);\r\n      return;\r\n    }\r\n\r\n    this.onStepChange.next({\r\n      step: this.currentStepIndex + 1,\r\n      total: this.currentSequence.steps.length,\r\n    });\r\n\r\n    // Start FPS monitoring\r\n    this.startFpsMonitoring();\r\n\r\n    // Animate to the extent\r\n    this.animateToExtent(element, step.extent, step.duration, () => {\r\n      // Stop FPS monitoring\r\n      this.stopFpsMonitoring();\r\n\r\n      // Move to next step\r\n      this.currentStepIndex++;\r\n      setTimeout(() => this.executeStep(element), 500); // Brief pause between steps\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Animate to a specific map extent\r\n   */\r\n  animateToExtent(\r\n    element: Element,\r\n    extent: MapExtent,\r\n    duration: number,\r\n    callback?: () => void\r\n  ): void {\r\n    const { center, scale } = extent;\r\n\r\n    // Animate projection to center and scale\r\n    this.geoZoomService.animateTo(center, scale, duration, callback);\r\n  }\r\n\r\n  /**\r\n   * Animate between two extents with custom easing\r\n   */\r\n  animateBetweenExtents(\r\n    element: Element,\r\n    from: MapExtent,\r\n    to: MapExtent,\r\n    config: AnimationConfig,\r\n    callback?: () => void\r\n  ): void {\r\n    const easing = config.easing || d3.easeCubicInOut;\r\n    const startTime = Date.now();\r\n\r\n    const interpolateScale = d3.interpolateNumber(from.scale, to.scale);\r\n    const interpolateCenter = d3.interpolate(from.center, to.center);\r\n\r\n    const tick = () => {\r\n      const elapsed = Date.now() - startTime;\r\n      const t = Math.min(elapsed / config.duration, 1);\r\n      const easedT = easing(t);\r\n\r\n      const currentScale = interpolateScale(easedT);\r\n      const currentCenter = interpolateCenter(easedT) as [number, number];\r\n\r\n      this.animateToExtent(element, { scale: currentScale, center: currentCenter }, 0);\r\n\r\n      if (t < 1) {\r\n        requestAnimationFrame(tick);\r\n      } else {\r\n        callback?.();\r\n      }\r\n    };\r\n\r\n    requestAnimationFrame(tick);\r\n  }\r\n\r\n  /**\r\n   * Handle sequence end\r\n   */\r\n  private handleSequenceEnd(element: Element): void {\r\n    if (this.currentSequence?.loop) {\r\n      this.currentStepIndex = 0;\r\n      setTimeout(() => this.executeStep(element), 1000);\r\n    } else {\r\n      this.stop();\r\n      this.onAnimationEnd.next();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop the current animation\r\n   */\r\n  stop(): void {\r\n    this.isPlaying = false;\r\n    this.currentStepIndex = 0;\r\n    this.stopFpsMonitoring();\r\n  }\r\n\r\n  /**\r\n   * Pause the current animation\r\n   */\r\n  pause(): void {\r\n    this.isPlaying = false;\r\n  }\r\n\r\n  /**\r\n   * Resume the paused animation\r\n   */\r\n  resume(element: Element): void {\r\n    if (this.currentSequence && !this.isPlaying) {\r\n      this.isPlaying = true;\r\n      this.executeStep(element);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Start monitoring FPS\r\n   */\r\n  private startFpsMonitoring(): void {\r\n    this.frameCount = 0;\r\n    this.lastFrameTime = performance.now();\r\n    this.monitorFps();\r\n  }\r\n\r\n  /**\r\n   * Monitor FPS during animation\r\n   */\r\n  private monitorFps(): void {\r\n    if (!this.isPlaying) return;\r\n\r\n    const currentTime = performance.now();\r\n    this.frameCount++;\r\n\r\n    // Calculate FPS every 500ms\r\n    if (currentTime - this.lastFrameTime >= 500) {\r\n      this.fps = Math.round((this.frameCount * 1000) / (currentTime - this.lastFrameTime));\r\n      this.onFpsUpdate.next(this.fps);\r\n\r\n      this.frameCount = 0;\r\n      this.lastFrameTime = currentTime;\r\n    }\r\n\r\n    requestAnimationFrame(() => this.monitorFps());\r\n  }\r\n\r\n  /**\r\n   * Stop monitoring FPS\r\n   */\r\n  private stopFpsMonitoring(): void {\r\n    this.fps = 0;\r\n    this.frameCount = 0;\r\n  }\r\n\r\n  /**\r\n   * Get current FPS\r\n   */\r\n  getCurrentFps(): number {\r\n    return this.fps;\r\n  }\r\n\r\n  /**\r\n   * Check if animation is playing\r\n   */\r\n  isAnimationPlaying(): boolean {\r\n    return this.isPlaying;\r\n  }\r\n}\r\n",
            "properties": [
                {
                    "name": "duration",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 9
                },
                {
                    "name": "extent",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "MapExtent",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 8
                },
                {
                    "name": "label",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 10
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "GeoBounds",
            "id": "interface-GeoBounds-7d678a89f92747d2fa4b0f051c91c6bd8aa8b5d8005f0a99b6e64b751429438bac72f1d9d2461f75fbfc8676ca1e28aa6acdae9d7b7a3feda2327c9df57142d2",
            "file": "src/app/components/map-container/models/map.types.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { GeoProjection } from 'd3-geo';\r\nimport { FeatureCollection } from 'geojson';\r\n\r\nexport type RenderMode = 'svg' | 'canvas';\r\n\r\nexport interface MapConfig {\r\n  projection: GeoProjection;\r\n  width: number;\r\n  height: number;\r\n  renderMode: RenderMode;\r\n}\r\n\r\nexport interface GeoBounds {\r\n  minLon: number;\r\n  maxLon: number;\r\n  minLat: number;\r\n  maxLat: number;\r\n}\r\n\r\nexport interface MapExtent {\r\n  center: [number, number]; // [longitude, latitude]\r\n  scale: number;\r\n}\r\n\r\nexport interface AnimationConfig {\r\n  duration: number; // milliseconds\r\n  easing?: (t: number) => number;\r\n}\r\n\r\nexport interface ZoomConfig {\r\n  scaleExtent: [number, number]; // [min, max]\r\n  translateExtent?: [[number, number], [number, number]];\r\n}\r\n\r\nexport interface MapData {\r\n  type: 'geojson' | 'vector-tile' | 'raster-tile';\r\n  data: FeatureCollection;\r\n}\r\n\r\nexport interface ZoomEvent {\r\n  scale: number;\r\n  translate: [number, number];\r\n  center: [number, number];\r\n}\r\n",
            "properties": [
                {
                    "name": "maxLat",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 17
                },
                {
                    "name": "maxLon",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 15
                },
                {
                    "name": "minLat",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 16
                },
                {
                    "name": "minLon",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 14
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "MapConfig",
            "id": "interface-MapConfig-7d678a89f92747d2fa4b0f051c91c6bd8aa8b5d8005f0a99b6e64b751429438bac72f1d9d2461f75fbfc8676ca1e28aa6acdae9d7b7a3feda2327c9df57142d2",
            "file": "src/app/components/map-container/models/map.types.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { GeoProjection } from 'd3-geo';\r\nimport { FeatureCollection } from 'geojson';\r\n\r\nexport type RenderMode = 'svg' | 'canvas';\r\n\r\nexport interface MapConfig {\r\n  projection: GeoProjection;\r\n  width: number;\r\n  height: number;\r\n  renderMode: RenderMode;\r\n}\r\n\r\nexport interface GeoBounds {\r\n  minLon: number;\r\n  maxLon: number;\r\n  minLat: number;\r\n  maxLat: number;\r\n}\r\n\r\nexport interface MapExtent {\r\n  center: [number, number]; // [longitude, latitude]\r\n  scale: number;\r\n}\r\n\r\nexport interface AnimationConfig {\r\n  duration: number; // milliseconds\r\n  easing?: (t: number) => number;\r\n}\r\n\r\nexport interface ZoomConfig {\r\n  scaleExtent: [number, number]; // [min, max]\r\n  translateExtent?: [[number, number], [number, number]];\r\n}\r\n\r\nexport interface MapData {\r\n  type: 'geojson' | 'vector-tile' | 'raster-tile';\r\n  data: FeatureCollection;\r\n}\r\n\r\nexport interface ZoomEvent {\r\n  scale: number;\r\n  translate: [number, number];\r\n  center: [number, number];\r\n}\r\n",
            "properties": [
                {
                    "name": "height",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 9
                },
                {
                    "name": "projection",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "GeoProjection",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 7
                },
                {
                    "name": "renderMode",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "RenderMode",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 10
                },
                {
                    "name": "width",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 8
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "MapData",
            "id": "interface-MapData-7d678a89f92747d2fa4b0f051c91c6bd8aa8b5d8005f0a99b6e64b751429438bac72f1d9d2461f75fbfc8676ca1e28aa6acdae9d7b7a3feda2327c9df57142d2",
            "file": "src/app/components/map-container/models/map.types.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { GeoProjection } from 'd3-geo';\r\nimport { FeatureCollection } from 'geojson';\r\n\r\nexport type RenderMode = 'svg' | 'canvas';\r\n\r\nexport interface MapConfig {\r\n  projection: GeoProjection;\r\n  width: number;\r\n  height: number;\r\n  renderMode: RenderMode;\r\n}\r\n\r\nexport interface GeoBounds {\r\n  minLon: number;\r\n  maxLon: number;\r\n  minLat: number;\r\n  maxLat: number;\r\n}\r\n\r\nexport interface MapExtent {\r\n  center: [number, number]; // [longitude, latitude]\r\n  scale: number;\r\n}\r\n\r\nexport interface AnimationConfig {\r\n  duration: number; // milliseconds\r\n  easing?: (t: number) => number;\r\n}\r\n\r\nexport interface ZoomConfig {\r\n  scaleExtent: [number, number]; // [min, max]\r\n  translateExtent?: [[number, number], [number, number]];\r\n}\r\n\r\nexport interface MapData {\r\n  type: 'geojson' | 'vector-tile' | 'raster-tile';\r\n  data: FeatureCollection;\r\n}\r\n\r\nexport interface ZoomEvent {\r\n  scale: number;\r\n  translate: [number, number];\r\n  center: [number, number];\r\n}\r\n",
            "properties": [
                {
                    "name": "data",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "FeatureCollection",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 37
                },
                {
                    "name": "type",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"geojson\" | \"vector-tile\" | \"raster-tile\"",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 36
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "MapExtent",
            "id": "interface-MapExtent-7d678a89f92747d2fa4b0f051c91c6bd8aa8b5d8005f0a99b6e64b751429438bac72f1d9d2461f75fbfc8676ca1e28aa6acdae9d7b7a3feda2327c9df57142d2",
            "file": "src/app/components/map-container/models/map.types.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { GeoProjection } from 'd3-geo';\r\nimport { FeatureCollection } from 'geojson';\r\n\r\nexport type RenderMode = 'svg' | 'canvas';\r\n\r\nexport interface MapConfig {\r\n  projection: GeoProjection;\r\n  width: number;\r\n  height: number;\r\n  renderMode: RenderMode;\r\n}\r\n\r\nexport interface GeoBounds {\r\n  minLon: number;\r\n  maxLon: number;\r\n  minLat: number;\r\n  maxLat: number;\r\n}\r\n\r\nexport interface MapExtent {\r\n  center: [number, number]; // [longitude, latitude]\r\n  scale: number;\r\n}\r\n\r\nexport interface AnimationConfig {\r\n  duration: number; // milliseconds\r\n  easing?: (t: number) => number;\r\n}\r\n\r\nexport interface ZoomConfig {\r\n  scaleExtent: [number, number]; // [min, max]\r\n  translateExtent?: [[number, number], [number, number]];\r\n}\r\n\r\nexport interface MapData {\r\n  type: 'geojson' | 'vector-tile' | 'raster-tile';\r\n  data: FeatureCollection;\r\n}\r\n\r\nexport interface ZoomEvent {\r\n  scale: number;\r\n  translate: [number, number];\r\n  center: [number, number];\r\n}\r\n",
            "properties": [
                {
                    "name": "center",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "[number, number]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 21
                },
                {
                    "name": "scale",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 22
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "RenderContext",
            "id": "interface-RenderContext-54541aea99ec546bdcb25fd9136454f11e79f85aeffcc48e0fd4dcc134077eeebf25027edb0a0f0b0f08638869091e269c2206a4f3ffa8241f33f299a7b8a48b",
            "file": "src/app/components/map-container/services/map-renderer.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable } from '@angular/core';\r\nimport * as d3 from 'd3';\r\nimport { GeoPath, GeoProjection } from 'd3-geo';\r\nimport { FeatureCollection } from 'geojson';\r\nimport { RenderMode } from '../models/map.types';\r\n\r\nexport interface RenderContext {\r\n  svg?: d3.Selection<SVGSVGElement, unknown, null, undefined>;\r\n  canvas?: HTMLCanvasElement;\r\n  context?: CanvasRenderingContext2D;\r\n  mode: RenderMode;\r\n  path: GeoPath;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class MapRendererService {\r\n  /**\r\n   * Initialize SVG renderer\r\n   */\r\n  initSvgRenderer(\r\n    container: HTMLElement,\r\n    width: number,\r\n    height: number,\r\n    projection: GeoProjection\r\n  ): RenderContext {\r\n    const svg = d3\r\n      .select(container)\r\n      .append('svg')\r\n      .attr('width', width)\r\n      .attr('height', height)\r\n      .attr('class', 'map-svg');\r\n\r\n    const path = d3.geoPath().projection(projection);\r\n\r\n    return {\r\n      svg,\r\n      mode: 'svg',\r\n      path,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Initialize Canvas renderer (for future implementation)\r\n   */\r\n  initCanvasRenderer(\r\n    container: HTMLElement,\r\n    width: number,\r\n    height: number,\r\n    projection: GeoProjection\r\n  ): RenderContext {\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n    canvas.className = 'map-canvas';\r\n    container.appendChild(canvas);\r\n\r\n    const context = canvas.getContext('2d');\r\n    if (!context) {\r\n      throw new Error('Could not get 2D context from canvas');\r\n    }\r\n\r\n    const path = d3.geoPath().projection(projection).context(context);\r\n\r\n    return {\r\n      canvas,\r\n      context,\r\n      mode: 'canvas',\r\n      path,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Render GeoJSON data\r\n   */\r\n  renderGeoJson(\r\n    renderContext: RenderContext,\r\n    data: FeatureCollection,\r\n    options?: {\r\n      layer?: string;\r\n      style?: { fill?: string; stroke?: string; strokeWidth?: number; fillOpacity?: number };\r\n    }\r\n  ): void {\r\n    if (renderContext.mode === 'svg' && renderContext.svg) {\r\n      this.renderSvg(renderContext, data, options);\r\n    } else if (renderContext.mode === 'canvas' && renderContext.context) {\r\n      this.renderCanvas(renderContext, data, options);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render to SVG\r\n   */\r\n  private renderSvg(\r\n    renderContext: RenderContext,\r\n    data: FeatureCollection,\r\n    options?: {\r\n      layer?: string;\r\n      style?: { fill?: string; stroke?: string; strokeWidth?: number; fillOpacity?: number };\r\n    }\r\n  ): void {\r\n    if (!renderContext.svg) return;\r\n\r\n    const layer = options?.layer || 'base';\r\n    const defaults = { fill: '#ccc', stroke: '#333', strokeWidth: 0.5, fillOpacity: 1 };\r\n    const style = Object.assign({}, defaults, options?.style || {});\r\n\r\n    // Remove existing paths for this layer only\r\n    renderContext.svg.selectAll(`path.layer-${layer}`).remove();\r\n\r\n    // Add new paths for this layer - one path per feature\r\n    // NOTE: Polygon winding order (clockwise vs counter-clockwise) determines\r\n    // which area gets filled in SVG. Counter-clockwise fills the interior,\r\n    // clockwise fills the exterior. The 'fill-rule' attribute can help handle\r\n    // edge cases, but correct winding order in source data is preferred.\r\n    const fillOpacity = style.fillOpacity ?? defaults.fillOpacity;\r\n    renderContext.svg\r\n      .selectAll(`path.layer-${layer}`)\r\n      .data(data.features, (d: any, i: number) => i)\r\n      .enter()\r\n      .append('path')\r\n      .attr('d', (d: any) => renderContext.path(d))\r\n      .attr('class', `geo-feature layer-${layer}`)\r\n      .attr('fill', style.fill ?? defaults.fill)\r\n      .attr('fill-opacity', String(fillOpacity))\r\n      .attr('fill-rule', 'evenodd') // Helps with complex polygons, but doesn't fix inverted winding\r\n      .attr('stroke', style.stroke ?? defaults.stroke)\r\n      .attr('stroke-width', String(style.strokeWidth ?? defaults.strokeWidth));\r\n  }\r\n\r\n  /**\r\n   * Render to Canvas\r\n   */\r\n  private renderCanvas(\r\n    renderContext: RenderContext,\r\n    data: FeatureCollection,\r\n    options?: {\r\n      layer?: string;\r\n      style?: { fill?: string; stroke?: string; strokeWidth?: number; fillOpacity?: number };\r\n    }\r\n  ): void {\r\n    if (!renderContext.context || !renderContext.canvas) return;\r\n\r\n    const ctx = renderContext.context;\r\n    const canvas = renderContext.canvas;\r\n    const layer = options?.layer || 'base';\r\n    const defaults = { fill: '#ccc', stroke: '#333', strokeWidth: 0.5, fillOpacity: 1 };\r\n    const style = Object.assign({}, defaults, options?.style || {});\r\n\r\n    // Clear canvas only when drawing the base layer so overlays can be drawn on top\r\n    if (layer === 'base') {\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n\r\n    // Draw each feature applying style\r\n    ctx.save();\r\n\r\n    // Set fill and stroke styles\r\n    const hasFill = typeof style.fill === 'string' && style.fill.toLowerCase() !== 'none';\r\n    const fillOpacity = typeof style.fillOpacity === 'number' ? style.fillOpacity : 1;\r\n\r\n    if (hasFill) {\r\n      ctx.fillStyle = style.fill || defaults.fill;\r\n      ctx.globalAlpha = fillOpacity;\r\n    }\r\n\r\n    ctx.strokeStyle = style.stroke || defaults.stroke;\r\n    ctx.lineWidth = style.strokeWidth ?? defaults.strokeWidth;\r\n\r\n    for (const feature of data.features) {\r\n      ctx.beginPath();\r\n      renderContext.path(feature as any);\r\n\r\n      // Fill if applicable\r\n      if (hasFill) {\r\n        ctx.fill();\r\n      }\r\n\r\n      // Stroke if not 'none'\r\n      if (!(typeof style.stroke === 'string' && style.stroke.toLowerCase() === 'none')) {\r\n        ctx.stroke();\r\n      }\r\n    }\r\n\r\n    ctx.restore();\r\n  }\r\n\r\n  /**\r\n   * Clear the rendering context\r\n   */\r\n  clear(renderContext: RenderContext): void {\r\n    if (renderContext.mode === 'svg' && renderContext.svg) {\r\n      renderContext.svg.selectAll('*').remove();\r\n    } else if (renderContext.mode === 'canvas' && renderContext.context && renderContext.canvas) {\r\n      renderContext.context.clearRect(\r\n        0,\r\n        0,\r\n        renderContext.canvas.width,\r\n        renderContext.canvas.height\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear a specific layer from the rendering context\r\n   */\r\n  clearLayer(renderContext: RenderContext, layer: string): void {\r\n    if (renderContext.mode === 'svg' && renderContext.svg) {\r\n      renderContext.svg.selectAll(`path.layer-${layer}`).remove();\r\n    } else if (renderContext.mode === 'canvas') {\r\n      // For canvas, we need to re-render all other layers\r\n      // This is a limitation of canvas - can't selectively remove\r\n      // For now, we'll just note this - full implementation would require layer tracking\r\n      console.warn('Canvas layer clearing not fully implemented - consider re-rendering');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update projection for render context\r\n   */\r\n  updateProjection(renderContext: RenderContext, projection: GeoProjection): void {\r\n    renderContext.path = d3.geoPath().projection(projection);\r\n    if (renderContext.mode === 'canvas' && renderContext.context) {\r\n      renderContext.path.context(renderContext.context);\r\n    }\r\n  }\r\n}\r\n",
            "properties": [
                {
                    "name": "canvas",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "HTMLCanvasElement",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 9
                },
                {
                    "name": "context",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "CanvasRenderingContext2D",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 10
                },
                {
                    "name": "mode",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "RenderMode",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 11
                },
                {
                    "name": "path",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "GeoPath",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 12
                },
                {
                    "name": "svg",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "d3.Selection<SVGSVGElement | unknown |  | undefined>",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 8
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "User",
            "id": "interface-User-23c11020a2831beb3fa02ee911a75b64009c31bb46f73a01145c2560cb13b7f7e641105b678bd8fb01a5a199117001f3da4a78351d29d85d213ed7b82982091f",
            "file": "src/stories/user.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "export interface User {\r\n  name: string;\r\n}\r\n",
            "properties": [
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "ZoomConfig",
            "id": "interface-ZoomConfig-7d678a89f92747d2fa4b0f051c91c6bd8aa8b5d8005f0a99b6e64b751429438bac72f1d9d2461f75fbfc8676ca1e28aa6acdae9d7b7a3feda2327c9df57142d2",
            "file": "src/app/components/map-container/models/map.types.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { GeoProjection } from 'd3-geo';\r\nimport { FeatureCollection } from 'geojson';\r\n\r\nexport type RenderMode = 'svg' | 'canvas';\r\n\r\nexport interface MapConfig {\r\n  projection: GeoProjection;\r\n  width: number;\r\n  height: number;\r\n  renderMode: RenderMode;\r\n}\r\n\r\nexport interface GeoBounds {\r\n  minLon: number;\r\n  maxLon: number;\r\n  minLat: number;\r\n  maxLat: number;\r\n}\r\n\r\nexport interface MapExtent {\r\n  center: [number, number]; // [longitude, latitude]\r\n  scale: number;\r\n}\r\n\r\nexport interface AnimationConfig {\r\n  duration: number; // milliseconds\r\n  easing?: (t: number) => number;\r\n}\r\n\r\nexport interface ZoomConfig {\r\n  scaleExtent: [number, number]; // [min, max]\r\n  translateExtent?: [[number, number], [number, number]];\r\n}\r\n\r\nexport interface MapData {\r\n  type: 'geojson' | 'vector-tile' | 'raster-tile';\r\n  data: FeatureCollection;\r\n}\r\n\r\nexport interface ZoomEvent {\r\n  scale: number;\r\n  translate: [number, number];\r\n  center: [number, number];\r\n}\r\n",
            "properties": [
                {
                    "name": "scaleExtent",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "[number, number]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 31
                },
                {
                    "name": "translateExtent",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "[unknown, unknown]",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 32
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "ZoomEvent",
            "id": "interface-ZoomEvent-7d678a89f92747d2fa4b0f051c91c6bd8aa8b5d8005f0a99b6e64b751429438bac72f1d9d2461f75fbfc8676ca1e28aa6acdae9d7b7a3feda2327c9df57142d2",
            "file": "src/app/components/map-container/models/map.types.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { GeoProjection } from 'd3-geo';\r\nimport { FeatureCollection } from 'geojson';\r\n\r\nexport type RenderMode = 'svg' | 'canvas';\r\n\r\nexport interface MapConfig {\r\n  projection: GeoProjection;\r\n  width: number;\r\n  height: number;\r\n  renderMode: RenderMode;\r\n}\r\n\r\nexport interface GeoBounds {\r\n  minLon: number;\r\n  maxLon: number;\r\n  minLat: number;\r\n  maxLat: number;\r\n}\r\n\r\nexport interface MapExtent {\r\n  center: [number, number]; // [longitude, latitude]\r\n  scale: number;\r\n}\r\n\r\nexport interface AnimationConfig {\r\n  duration: number; // milliseconds\r\n  easing?: (t: number) => number;\r\n}\r\n\r\nexport interface ZoomConfig {\r\n  scaleExtent: [number, number]; // [min, max]\r\n  translateExtent?: [[number, number], [number, number]];\r\n}\r\n\r\nexport interface MapData {\r\n  type: 'geojson' | 'vector-tile' | 'raster-tile';\r\n  data: FeatureCollection;\r\n}\r\n\r\nexport interface ZoomEvent {\r\n  scale: number;\r\n  translate: [number, number];\r\n  center: [number, number];\r\n}\r\n",
            "properties": [
                {
                    "name": "center",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "[number, number]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 43
                },
                {
                    "name": "scale",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 41
                },
                {
                    "name": "translate",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "[number, number]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 42
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        }
    ],
    "injectables": [
        {
            "name": "AnimationControllerService",
            "id": "injectable-AnimationControllerService-d1e39c33c593a759b3167b671d47d42ea11f778e5dab62fb4109015aaea16ce7acb7350409bff0428d6c68efd36d1aab3b285d30fca4e2e31938ced1d37ebb6d",
            "file": "src/app/components/map-container/services/animation-controller.service.ts",
            "properties": [
                {
                    "name": "currentSequence",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "AnimationSequence",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 26,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "currentStepIndex",
                    "defaultValue": "0",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 27,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "fps",
                    "defaultValue": "0",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 31,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "frameCount",
                    "defaultValue": "0",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 29,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "isPlaying",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 28,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "lastFrameTime",
                    "defaultValue": "0",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 30,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "onAnimationEnd",
                    "defaultValue": "new Subject<void>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 35,
                    "modifierKind": [
                        125
                    ]
                },
                {
                    "name": "onAnimationStart",
                    "defaultValue": "new Subject<void>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 34,
                    "modifierKind": [
                        125
                    ]
                },
                {
                    "name": "onFpsUpdate",
                    "defaultValue": "new Subject<number>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 37,
                    "modifierKind": [
                        125
                    ]
                },
                {
                    "name": "onStepChange",
                    "defaultValue": "new Subject<{ step: number; total: number }>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 36,
                    "modifierKind": [
                        125
                    ]
                }
            ],
            "methods": [
                {
                    "name": "animateBetweenExtents",
                    "args": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "from",
                            "type": "MapExtent",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "to",
                            "type": "MapExtent",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "config",
                            "type": "AnimationConfig",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "callback",
                            "type": "function",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "optional": true,
                            "function": []
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 102,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nAnimate between two extents with custom easing\n",
                    "description": "<p>Animate between two extents with custom easing</p>\n",
                    "jsdoctags": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "from",
                            "type": "MapExtent",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "to",
                            "type": "MapExtent",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "config",
                            "type": "AnimationConfig",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "callback",
                            "type": "function",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "optional": true,
                            "function": [],
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "animateToExtent",
                    "args": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "extent",
                            "type": "MapExtent",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "duration",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "callback",
                            "type": "function",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "optional": true,
                            "function": []
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 87,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nAnimate to a specific map extent\n",
                    "description": "<p>Animate to a specific map extent</p>\n",
                    "jsdoctags": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "extent",
                            "type": "MapExtent",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "duration",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "callback",
                            "type": "function",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "optional": true,
                            "function": [],
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "executeStep",
                    "args": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 56,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nExecute a single animation step\n",
                    "description": "<p>Execute a single animation step</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getCurrentFps",
                    "args": [],
                    "optional": false,
                    "returnType": "number",
                    "typeParameters": [],
                    "line": 215,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nGet current FPS\n",
                    "description": "<p>Get current FPS</p>\n"
                },
                {
                    "name": "handleSequenceEnd",
                    "args": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 138,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nHandle sequence end\n",
                    "description": "<p>Handle sequence end</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "isAnimationPlaying",
                    "args": [],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 222,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nCheck if animation is playing\n",
                    "description": "<p>Check if animation is playing</p>\n"
                },
                {
                    "name": "monitorFps",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 186,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nMonitor FPS during animation\n",
                    "description": "<p>Monitor FPS during animation</p>\n",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "pause",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 160,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nPause the current animation\n",
                    "description": "<p>Pause the current animation</p>\n"
                },
                {
                    "name": "playSequence",
                    "args": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "sequence",
                            "type": "AnimationSequence",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 44,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nPlay an animation sequence\n",
                    "description": "<p>Play an animation sequence</p>\n",
                    "jsdoctags": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "sequence",
                            "type": "AnimationSequence",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "resume",
                    "args": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 167,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nResume the paused animation\n",
                    "description": "<p>Resume the paused animation</p>\n",
                    "jsdoctags": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "startFpsMonitoring",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 177,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nStart monitoring FPS\n",
                    "description": "<p>Start monitoring FPS</p>\n",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "stop",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 151,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nStop the current animation\n",
                    "description": "<p>Stop the current animation</p>\n"
                },
                {
                    "name": "stopFpsMonitoring",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 207,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nStop monitoring FPS\n",
                    "description": "<p>Stop monitoring FPS</p>\n",
                    "modifierKind": [
                        123
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "<p>Animation Controller Service\nHandles programmatic animations between map extents</p>\n",
            "rawdescription": "\n\nAnimation Controller Service\nHandles programmatic animations between map extents\n",
            "sourceCode": "import { Injectable } from '@angular/core';\r\nimport * as d3 from 'd3';\r\nimport { Subject } from 'rxjs';\r\nimport { AnimationConfig, MapExtent } from '../models/map.types';\r\nimport { GeoZoomService } from './geo-zoom.service';\r\n\r\nexport interface AnimationStep {\r\n  extent: MapExtent;\r\n  duration: number;\r\n  label?: string;\r\n}\r\n\r\nexport interface AnimationSequence {\r\n  steps: AnimationStep[];\r\n  loop?: boolean;\r\n}\r\n\r\n/**\r\n * Animation Controller Service\r\n * Handles programmatic animations between map extents\r\n */\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AnimationControllerService {\r\n  private currentSequence?: AnimationSequence;\r\n  private currentStepIndex = 0;\r\n  private isPlaying = false;\r\n  private frameCount = 0;\r\n  private lastFrameTime = 0;\r\n  private fps = 0;\r\n\r\n  // Observables\r\n  public onAnimationStart = new Subject<void>();\r\n  public onAnimationEnd = new Subject<void>();\r\n  public onStepChange = new Subject<{ step: number; total: number }>();\r\n  public onFpsUpdate = new Subject<number>();\r\n\r\n  constructor(private geoZoomService: GeoZoomService) {}\r\n\r\n  /**\r\n   * Play an animation sequence\r\n   */\r\n  playSequence(element: Element, sequence: AnimationSequence): void {\r\n    this.currentSequence = sequence;\r\n    this.currentStepIndex = 0;\r\n    this.isPlaying = true;\r\n\r\n    this.onAnimationStart.next();\r\n    this.executeStep(element);\r\n  }\r\n\r\n  /**\r\n   * Execute a single animation step\r\n   */\r\n  private executeStep(element: Element): void {\r\n    if (!this.currentSequence || !this.isPlaying) return;\r\n\r\n    const step = this.currentSequence.steps[this.currentStepIndex];\r\n    if (!step) {\r\n      this.handleSequenceEnd(element);\r\n      return;\r\n    }\r\n\r\n    this.onStepChange.next({\r\n      step: this.currentStepIndex + 1,\r\n      total: this.currentSequence.steps.length,\r\n    });\r\n\r\n    // Start FPS monitoring\r\n    this.startFpsMonitoring();\r\n\r\n    // Animate to the extent\r\n    this.animateToExtent(element, step.extent, step.duration, () => {\r\n      // Stop FPS monitoring\r\n      this.stopFpsMonitoring();\r\n\r\n      // Move to next step\r\n      this.currentStepIndex++;\r\n      setTimeout(() => this.executeStep(element), 500); // Brief pause between steps\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Animate to a specific map extent\r\n   */\r\n  animateToExtent(\r\n    element: Element,\r\n    extent: MapExtent,\r\n    duration: number,\r\n    callback?: () => void\r\n  ): void {\r\n    const { center, scale } = extent;\r\n\r\n    // Animate projection to center and scale\r\n    this.geoZoomService.animateTo(center, scale, duration, callback);\r\n  }\r\n\r\n  /**\r\n   * Animate between two extents with custom easing\r\n   */\r\n  animateBetweenExtents(\r\n    element: Element,\r\n    from: MapExtent,\r\n    to: MapExtent,\r\n    config: AnimationConfig,\r\n    callback?: () => void\r\n  ): void {\r\n    const easing = config.easing || d3.easeCubicInOut;\r\n    const startTime = Date.now();\r\n\r\n    const interpolateScale = d3.interpolateNumber(from.scale, to.scale);\r\n    const interpolateCenter = d3.interpolate(from.center, to.center);\r\n\r\n    const tick = () => {\r\n      const elapsed = Date.now() - startTime;\r\n      const t = Math.min(elapsed / config.duration, 1);\r\n      const easedT = easing(t);\r\n\r\n      const currentScale = interpolateScale(easedT);\r\n      const currentCenter = interpolateCenter(easedT) as [number, number];\r\n\r\n      this.animateToExtent(element, { scale: currentScale, center: currentCenter }, 0);\r\n\r\n      if (t < 1) {\r\n        requestAnimationFrame(tick);\r\n      } else {\r\n        callback?.();\r\n      }\r\n    };\r\n\r\n    requestAnimationFrame(tick);\r\n  }\r\n\r\n  /**\r\n   * Handle sequence end\r\n   */\r\n  private handleSequenceEnd(element: Element): void {\r\n    if (this.currentSequence?.loop) {\r\n      this.currentStepIndex = 0;\r\n      setTimeout(() => this.executeStep(element), 1000);\r\n    } else {\r\n      this.stop();\r\n      this.onAnimationEnd.next();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop the current animation\r\n   */\r\n  stop(): void {\r\n    this.isPlaying = false;\r\n    this.currentStepIndex = 0;\r\n    this.stopFpsMonitoring();\r\n  }\r\n\r\n  /**\r\n   * Pause the current animation\r\n   */\r\n  pause(): void {\r\n    this.isPlaying = false;\r\n  }\r\n\r\n  /**\r\n   * Resume the paused animation\r\n   */\r\n  resume(element: Element): void {\r\n    if (this.currentSequence && !this.isPlaying) {\r\n      this.isPlaying = true;\r\n      this.executeStep(element);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Start monitoring FPS\r\n   */\r\n  private startFpsMonitoring(): void {\r\n    this.frameCount = 0;\r\n    this.lastFrameTime = performance.now();\r\n    this.monitorFps();\r\n  }\r\n\r\n  /**\r\n   * Monitor FPS during animation\r\n   */\r\n  private monitorFps(): void {\r\n    if (!this.isPlaying) return;\r\n\r\n    const currentTime = performance.now();\r\n    this.frameCount++;\r\n\r\n    // Calculate FPS every 500ms\r\n    if (currentTime - this.lastFrameTime >= 500) {\r\n      this.fps = Math.round((this.frameCount * 1000) / (currentTime - this.lastFrameTime));\r\n      this.onFpsUpdate.next(this.fps);\r\n\r\n      this.frameCount = 0;\r\n      this.lastFrameTime = currentTime;\r\n    }\r\n\r\n    requestAnimationFrame(() => this.monitorFps());\r\n  }\r\n\r\n  /**\r\n   * Stop monitoring FPS\r\n   */\r\n  private stopFpsMonitoring(): void {\r\n    this.fps = 0;\r\n    this.frameCount = 0;\r\n  }\r\n\r\n  /**\r\n   * Get current FPS\r\n   */\r\n  getCurrentFps(): number {\r\n    return this.fps;\r\n  }\r\n\r\n  /**\r\n   * Check if animation is playing\r\n   */\r\n  isAnimationPlaying(): boolean {\r\n    return this.isPlaying;\r\n  }\r\n}\r\n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "geoZoomService",
                        "type": "GeoZoomService",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 37,
                "jsdoctags": [
                    {
                        "name": "geoZoomService",
                        "type": "GeoZoomService",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "GeoZoomService",
            "id": "injectable-GeoZoomService-23b90eacebcb33e32e9fa771c46bcc46a73286f1b875dced50291e918b855e22d78c0cf2c620a1c1e49596c2d2d568787de69cd79ec883b4ba2b6280ccfce00f",
            "file": "src/app/components/map-container/services/geo-zoom.service.ts",
            "properties": [
                {
                    "name": "animationId",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 39,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "boundMouseDown",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "function",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 50,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "boundMouseMove",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "function",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 51,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "boundMouseUp",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "function",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 52,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "boundTouchEnd",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "function",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 56,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "boundTouchMove",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "function",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 55,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "boundTouchStart",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "function",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 54,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "boundWheel",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "function",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 53,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "currentCenter",
                    "defaultValue": "[0, 0]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "[number, number]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 26,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "currentRotation",
                    "defaultValue": "[0, 0, 0]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "[number, number, number]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 23,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "currentScale",
                    "defaultValue": "1",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 22,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "element",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Element",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 17,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "height",
                    "defaultValue": "0",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 19,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "initialCenter",
                    "defaultValue": "[0, 0]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "[number, number]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 31,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "initialRotation",
                    "defaultValue": "[0, 0, 0]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "[number, number, number]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 30,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "initialScale",
                    "defaultValue": "1",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 29,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "isDragging",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 46,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "lastMousePos",
                    "defaultValue": "[0, 0]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "[number, number]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 47,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "onProjectionChange",
                    "defaultValue": "new Subject<void>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 59,
                    "modifierKind": [
                        125
                    ]
                },
                {
                    "name": "panScaleAlpha",
                    "defaultValue": "1",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 36,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "projection",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "GeoProjection",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 16,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "scaleExtent",
                    "defaultValue": "[0.5, 20]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "[number, number]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 34,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "scaleSmoothingBase",
                    "defaultValue": "0.18",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 43,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "scaleVelocity",
                    "defaultValue": "0",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 42,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "smoothingBase",
                    "defaultValue": "0.15",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 38,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "targetRotation",
                    "defaultValue": "[0, 0, 0]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "[number, number, number]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 25,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "targetScale",
                    "defaultValue": "1",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 41,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "touchStartPos",
                    "defaultValue": "[0, 0]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "[number, number]",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Touch support - start</p>\n",
                    "line": 216,
                    "rawdescription": "\n\nTouch support - start\n",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "width",
                    "defaultValue": "0",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 18,
                    "modifierKind": [
                        123
                    ]
                }
            ],
            "methods": [
                {
                    "name": "animateTo",
                    "args": [
                        {
                            "name": "center",
                            "type": "[number, number]",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "scale",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "duration",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "750"
                        },
                        {
                            "name": "callback",
                            "type": "function",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "optional": true,
                            "function": []
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 386,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nAnimate to a specific center and scale\n",
                    "description": "<p>Animate to a specific center and scale</p>\n",
                    "jsdoctags": [
                        {
                            "name": "center",
                            "type": "[number, number]",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "scale",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "duration",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "750",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "callback",
                            "type": "function",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "optional": true,
                            "function": [],
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "destroy",
                    "args": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 456,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nDestroy and cleanup\n",
                    "description": "<p>Destroy and cleanup</p>\n",
                    "jsdoctags": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getCurrentState",
                    "args": [],
                    "optional": false,
                    "returnType": "{ center: [number, number]; scale: number; rotation: [number, number, number]; }",
                    "typeParameters": [],
                    "line": 445,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nGet current projection state\n",
                    "description": "<p>Get current projection state</p>\n"
                },
                {
                    "name": "handleMouseDown",
                    "args": [
                        {
                            "name": "event",
                            "type": "MouseEvent",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 141,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nHandle mouse down - start dragging\n",
                    "description": "<p>Handle mouse down - start dragging</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "MouseEvent",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "handleMouseMove",
                    "args": [
                        {
                            "name": "event",
                            "type": "MouseEvent",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 151,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nHandle mouse move - update projection during drag\n",
                    "description": "<p>Handle mouse move - update projection during drag</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "MouseEvent",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "handleMouseUp",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 181,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nHandle mouse up - stop dragging\n",
                    "description": "<p>Handle mouse up - stop dragging</p>\n",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "handleTouchEnd",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 339,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nTouch support - end\n",
                    "description": "<p>Touch support - end</p>\n",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "handleTouchMove",
                    "args": [
                        {
                            "name": "event",
                            "type": "TouchEvent",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 230,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nTouch support - move\n",
                    "description": "<p>Touch support - move</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "TouchEvent",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "handleTouchStart",
                    "args": [
                        {
                            "name": "event",
                            "type": "TouchEvent",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 217,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "TouchEvent",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "handleWheel",
                    "args": [
                        {
                            "name": "event",
                            "type": "WheelEvent",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 191,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nHandle wheel - zoom in/out\n",
                    "description": "<p>Handle wheel - zoom in/out</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "WheelEvent",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "init",
                    "args": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "projection",
                            "type": "GeoProjection",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "width",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "height",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "config",
                            "type": "ZoomConfig",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "{ scaleExtent: [0.5, 20] }"
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 76,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nInitialize interaction handlers on a DOM element\n",
                    "description": "<p>Initialize interaction handlers on a DOM element</p>\n",
                    "jsdoctags": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "projection",
                            "type": "GeoProjection",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "width",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "height",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "config",
                            "type": "ZoomConfig",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "{ scaleExtent: [0.5, 20] }",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "reset",
                    "args": [
                        {
                            "name": "duration",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "750"
                        },
                        {
                            "name": "callback",
                            "type": "function",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "optional": true,
                            "function": []
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 438,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nReset projection to initial state\n",
                    "description": "<p>Reset projection to initial state</p>\n",
                    "jsdoctags": [
                        {
                            "name": "duration",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "750",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "callback",
                            "type": "function",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "optional": true,
                            "function": [],
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "setCenter",
                    "args": [
                        {
                            "name": "center",
                            "type": "[number, number]",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "triggerRender",
                            "type": "unknown",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "true"
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 346,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nProgrammatically set projection center (via rotation for equirectangular)\n",
                    "description": "<p>Programmatically set projection center (via rotation for equirectangular)</p>\n",
                    "jsdoctags": [
                        {
                            "name": "center",
                            "type": "[number, number]",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "triggerRender",
                            "type": "unknown",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "true",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "setScale",
                    "args": [
                        {
                            "name": "scale",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "triggerRender",
                            "type": "unknown",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "true"
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 365,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nProgrammatically set projection scale\n",
                    "description": "<p>Programmatically set projection scale</p>\n",
                    "jsdoctags": [
                        {
                            "name": "scale",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "triggerRender",
                            "type": "unknown",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "true",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "setupEventListeners",
                    "args": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 114,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nSetup mouse and wheel event listeners\n",
                    "description": "<p>Setup mouse and wheel event listeners</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "element",
                            "type": "Element",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "startAnimationLoop",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 261,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nStart the animation loop that lerps currentRotation toward targetRotation",
                    "description": "<p>Start the animation loop that lerps currentRotation toward targetRotation</p>\n",
                    "modifierKind": [
                        123
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "<p>GeoZoom Service\nHandles zoom and pan interactions by updating the projection directly\nThis causes the map to re-render with proper geographic transformations</p>\n",
            "rawdescription": "\n\nGeoZoom Service\nHandles zoom and pan interactions by updating the projection directly\nThis causes the map to re-render with proper geographic transformations\n",
            "sourceCode": "import { Injectable } from '@angular/core';\r\nimport * as d3 from 'd3';\r\nimport { GeoProjection } from 'd3-geo';\r\nimport { Subject } from 'rxjs';\r\nimport { ZoomConfig, ZoomEvent } from '../models/map.types';\r\n\r\n/**\r\n * GeoZoom Service\r\n * Handles zoom and pan interactions by updating the projection directly\r\n * This causes the map to re-render with proper geographic transformations\r\n */\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class GeoZoomService {\r\n  private projection?: GeoProjection;\r\n  private element?: Element;\r\n  private width = 0;\r\n  private height = 0;\r\n\r\n  // Projection state\r\n  private currentScale = 1;\r\n  private currentRotation: [number, number, number] = [0, 0, 0];\r\n  // Target rotation used for smoothing (displayed rotation lerps toward this)\r\n  private targetRotation: [number, number, number] = [0, 0, 0];\r\n  private currentCenter: [number, number] = [0, 0];\r\n\r\n  // Initial state\r\n  private initialScale = 1;\r\n  private initialRotation: [number, number, number] = [0, 0, 0];\r\n  private initialCenter: [number, number] = [0, 0];\r\n\r\n  // Config\r\n  private scaleExtent: [number, number] = [0.5, 20];\r\n  // Pan tuning: higher alpha -> stronger reduction of pan at high zoom\r\n  private panScaleAlpha = 1;\r\n  // Smoothing configuration for lerp\r\n  private smoothingBase = 0.15;\r\n  private animationId?: number;\r\n  // Scale smoothing / inertia\r\n  private targetScale = 1;\r\n  private scaleVelocity = 0;\r\n  private scaleSmoothingBase = 0.18;\r\n\r\n  // Mouse state\r\n  private isDragging = false;\r\n  private lastMousePos: [number, number] = [0, 0];\r\n\r\n  // Bound event handlers (store references for cleanup)\r\n  private boundMouseDown: (e: MouseEvent) => void;\r\n  private boundMouseMove: (e: MouseEvent) => void;\r\n  private boundMouseUp: () => void;\r\n  private boundWheel: (e: WheelEvent) => void;\r\n  private boundTouchStart: (e: TouchEvent) => void;\r\n  private boundTouchMove: (e: TouchEvent) => void;\r\n  private boundTouchEnd: () => void;\r\n\r\n  // Observable for projection changes\r\n  public onProjectionChange = new Subject<void>();\r\n\r\n  constructor() {\r\n    // Bind event handlers once\r\n    this.boundMouseDown = this.handleMouseDown.bind(this);\r\n    this.boundMouseMove = this.handleMouseMove.bind(this);\r\n    this.boundMouseUp = this.handleMouseUp.bind(this);\r\n    this.boundWheel = this.handleWheel.bind(this);\r\n    this.boundTouchStart = this.handleTouchStart.bind(this);\r\n    this.boundTouchMove = this.handleTouchMove.bind(this);\r\n    this.boundTouchEnd = this.handleTouchEnd.bind(this);\r\n    this.targetRotation = [...this.currentRotation];\r\n  }\r\n\r\n  /**\r\n   * Initialize interaction handlers on a DOM element\r\n   */\r\n  init(\r\n    element: Element,\r\n    projection: GeoProjection,\r\n    width: number,\r\n    height: number,\r\n    config: ZoomConfig = { scaleExtent: [0.5, 20] }\r\n  ): void {\r\n    this.projection = projection;\r\n    this.element = element;\r\n    this.width = width;\r\n    this.height = height;\r\n    this.scaleExtent = config.scaleExtent;\r\n\r\n    // Store initial projection state\r\n    this.initialScale = projection.scale();\r\n    this.currentScale = this.initialScale;\r\n    this.targetScale = this.initialScale;\r\n\r\n    const center = projection.center?.();\r\n    if (center) {\r\n      this.initialCenter = center as [number, number];\r\n      this.currentCenter = [...this.initialCenter];\r\n    }\r\n\r\n    const rotate = projection.rotate?.();\r\n    if (rotate) {\r\n      this.initialRotation = rotate as [number, number, number];\r\n      this.currentRotation = [...this.initialRotation];\r\n      this.targetRotation = [...this.initialRotation];\r\n    }\r\n\r\n    // Add event listeners\r\n    this.setupEventListeners(element);\r\n  }\r\n\r\n  /**\r\n   * Setup mouse and wheel event listeners\r\n   */\r\n  private setupEventListeners(element: Element): void {\r\n    const el = element as HTMLElement;\r\n\r\n    // Make element focusable for wheel events\r\n    if (!el.hasAttribute('tabindex')) {\r\n      el.setAttribute('tabindex', '0');\r\n    }\r\n\r\n    // Mouse drag for panning - mousedown on element\r\n    el.addEventListener('mousedown', this.boundMouseDown);\r\n\r\n    // mousemove and mouseup on document for better drag handling\r\n    document.addEventListener('mousemove', this.boundMouseMove);\r\n    document.addEventListener('mouseup', this.boundMouseUp);\r\n\r\n    // Wheel for zooming\r\n    el.addEventListener('wheel', this.boundWheel, { passive: false });\r\n\r\n    // Touch support\r\n    el.addEventListener('touchstart', this.boundTouchStart, { passive: false });\r\n    el.addEventListener('touchmove', this.boundTouchMove, { passive: false });\r\n    el.addEventListener('touchend', this.boundTouchEnd);\r\n  }\r\n\r\n  /**\r\n   * Handle mouse down - start dragging\r\n   */\r\n  private handleMouseDown(event: MouseEvent): void {\r\n    event.preventDefault();\r\n    this.isDragging = true;\r\n    this.lastMousePos = [event.clientX, event.clientY];\r\n    (this.element as HTMLElement).style.cursor = 'grabbing';\r\n  }\r\n\r\n  /**\r\n   * Handle mouse move - update projection during drag\r\n   */\r\n  private handleMouseMove(event: MouseEvent): void {\r\n    if (!this.isDragging || !this.projection) return;\r\n\r\n    const dx = event.clientX - this.lastMousePos[0];\r\n    const dy = event.clientY - this.lastMousePos[1];\r\n    this.lastMousePos = [event.clientX, event.clientY];\r\n\r\n    // Calculate rotation change based on mouse movement\r\n    const sensitivity = 0.5; // base sensitivity\r\n\r\n    // Reduce pan effect as scale increases to avoid twitchiness at high zoom\r\n    const relScale = this.currentScale / this.initialScale || 1;\r\n    const scaleFactor = Math.pow(relScale, -this.panScaleAlpha);\r\n\r\n    const rotationX = -dy * sensitivity * scaleFactor;\r\n    const rotationY = dx * sensitivity * scaleFactor;\r\n\r\n    // Update target rotation (we lerp the displayed rotation toward this target)\r\n    this.targetRotation = [\r\n      this.targetRotation[0] + rotationY,\r\n      this.targetRotation[1] + rotationX,\r\n      this.targetRotation[2],\r\n    ];\r\n\r\n    this.startAnimationLoop();\r\n  }\r\n\r\n  /**\r\n   * Handle mouse up - stop dragging\r\n   */\r\n  private handleMouseUp(): void {\r\n    this.isDragging = false;\r\n    if (this.element) {\r\n      (this.element as HTMLElement).style.cursor = 'grab';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle wheel - zoom in/out\r\n   */\r\n  private handleWheel(event: WheelEvent): void {\r\n    event.preventDefault();\r\n    if (!this.projection) return;\r\n\r\n    // Calculate new scale\r\n    const delta = -event.deltaY;\r\n    const scaleFactor = delta > 0 ? 1.1 : 0.9;\r\n    // Update target scale and give a bit of velocity for inertia\r\n    let newTarget = this.targetScale * scaleFactor;\r\n    newTarget = Math.max(\r\n      this.scaleExtent[0] * this.initialScale,\r\n      Math.min(this.scaleExtent[1] * this.initialScale, newTarget)\r\n    );\r\n\r\n    // Blend velocity instead of pure accumulation for smoother zoom\r\n    const velocityDelta = (newTarget - this.currentScale) * 0.2;\r\n    this.scaleVelocity = this.scaleVelocity * 0.5 + velocityDelta;\r\n    this.targetScale = newTarget;\r\n\r\n    this.startAnimationLoop();\r\n  }\r\n\r\n  /**\r\n   * Touch support - start\r\n   */\r\n  private touchStartPos: [number, number] = [0, 0];\r\n  private handleTouchStart(event: TouchEvent): void {\r\n    if (event.touches.length === 1) {\r\n      event.preventDefault();\r\n      this.isDragging = true;\r\n      const touch = event.touches[0];\r\n      this.lastMousePos = [touch.clientX, touch.clientY];\r\n      this.touchStartPos = [touch.clientX, touch.clientY];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Touch support - move\r\n   */\r\n  private handleTouchMove(event: TouchEvent): void {\r\n    if (event.touches.length === 1 && this.isDragging) {\r\n      event.preventDefault();\r\n      const touch = event.touches[0];\r\n\r\n      const dx = touch.clientX - this.lastMousePos[0];\r\n      const dy = touch.clientY - this.lastMousePos[1];\r\n      this.lastMousePos = [touch.clientX, touch.clientY];\r\n\r\n      if (!this.projection) return;\r\n\r\n      const sensitivity = 0.5;\r\n      // Reduce pan effect as scale increases\r\n      const relScale = this.currentScale / this.initialScale || 1;\r\n      const scaleFactor = Math.pow(relScale, -this.panScaleAlpha);\r\n\r\n      const rotationX = -dy * sensitivity * scaleFactor;\r\n      const rotationY = dx * sensitivity * scaleFactor;\r\n\r\n      // Update target rotation; animation loop will lerp displayed rotation\r\n      this.targetRotation = [\r\n        this.targetRotation[0] + rotationY,\r\n        this.targetRotation[1] + rotationX,\r\n        this.targetRotation[2],\r\n      ];\r\n\r\n      this.startAnimationLoop();\r\n    }\r\n  }\r\n\r\n  /** Start the animation loop that lerps currentRotation toward targetRotation */\r\n  private startAnimationLoop(): void {\r\n    if (this.animationId) return; // already running\r\n    const animate = () => {\r\n      if (!this.projection) {\r\n        this.animationId = undefined;\r\n        return;\r\n      }\r\n\r\n      const relScale = this.currentScale / this.initialScale || 1;\r\n      const smoothing = this.smoothingBase * Math.min(relScale, 4);\r\n\r\n      let changed = false;\r\n      const next: [number, number, number] = [...this.currentRotation];\r\n      for (let i = 0; i < 3; i++) {\r\n        const v =\r\n          this.currentRotation[i] + (this.targetRotation[i] - this.currentRotation[i]) * smoothing;\r\n        if (Math.abs(v - this.currentRotation[i]) > 1e-4) changed = true;\r\n        next[i] = v;\r\n      }\r\n\r\n      this.currentRotation = next;\r\n\r\n      // Scale smoothing with unified damped spring approach\r\n      let scaleChanged = false;\r\n\r\n      // Calculate target difference\r\n      const targetDiff = this.targetScale - this.currentScale;\r\n\r\n      // Apply velocity with damping and target-seeking to prevent overshoot\r\n      if (Math.abs(this.scaleVelocity) > 1e-4 || Math.abs(targetDiff) > 1e-4) {\r\n        const scaleSmoothing = Math.min(this.scaleSmoothingBase * Math.max(relScale, 0.5), 0.5);\r\n\r\n        // Apply velocity\r\n        this.currentScale += this.scaleVelocity;\r\n\r\n        // Also pull toward target to prevent overshoot\r\n        this.currentScale += targetDiff * scaleSmoothing * 0.3;\r\n\r\n        // Decay velocity more aggressively\r\n        this.scaleVelocity *= 0.75;\r\n\r\n        // Additional damping when close to target to prevent oscillation\r\n        if (Math.abs(targetDiff) < this.initialScale * 0.1) {\r\n          this.scaleVelocity *= 0.8;\r\n        }\r\n\r\n        scaleChanged = true;\r\n      }\r\n\r\n      // Clamp scale\r\n      this.currentScale = Math.max(\r\n        this.scaleExtent[0] * this.initialScale,\r\n        Math.min(this.scaleExtent[1] * this.initialScale, this.currentScale)\r\n      );\r\n\r\n      if (this.projection.rotate) {\r\n        this.projection.rotate(this.currentRotation);\r\n      }\r\n\r\n      if (this.projection.scale) {\r\n        this.projection.scale(this.currentScale);\r\n      }\r\n\r\n      this.onProjectionChange.next();\r\n\r\n      if (changed || scaleChanged) {\r\n        this.animationId = requestAnimationFrame(animate);\r\n      } else {\r\n        this.animationId = undefined;\r\n      }\r\n    };\r\n\r\n    this.animationId = requestAnimationFrame(animate);\r\n  }\r\n\r\n  /**\r\n   * Touch support - end\r\n   */\r\n  private handleTouchEnd(): void {\r\n    this.isDragging = false;\r\n  }\r\n\r\n  /**\r\n   * Programmatically set projection center (via rotation for equirectangular)\r\n   */\r\n  setCenter(center: [number, number], triggerRender = true): void {\r\n    if (!this.projection) return;\r\n\r\n    // For equirectangular and similar projections, use rotation\r\n    this.currentRotation = [-center[0], -center[1], 0];\r\n    this.targetRotation = [...this.currentRotation];\r\n\r\n    if (this.projection.rotate) {\r\n      this.projection.rotate(this.currentRotation);\r\n    }\r\n\r\n    if (triggerRender) {\r\n      this.onProjectionChange.next();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Programmatically set projection scale\r\n   */\r\n  setScale(scale: number, triggerRender = true): void {\r\n    if (!this.projection) return;\r\n\r\n    const absolute = this.initialScale * scale;\r\n    if (triggerRender) {\r\n      // smooth toward the requested scale\r\n      this.targetScale = absolute;\r\n      this.startAnimationLoop();\r\n    } else {\r\n      // immediate update (used by animateTo)\r\n      this.currentScale = absolute;\r\n      this.targetScale = absolute;\r\n      this.scaleVelocity = 0;\r\n      this.projection.scale(this.currentScale);\r\n      this.onProjectionChange.next();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Animate to a specific center and scale\r\n   */\r\n  animateTo(\r\n    center: [number, number],\r\n    scale: number,\r\n    duration: number = 750,\r\n    callback?: () => void\r\n  ): void {\r\n    if (!this.projection) return;\r\n\r\n    const startCenter = [...this.currentCenter];\r\n    const startScale = this.currentScale / this.initialScale;\r\n    const startTime = Date.now();\r\n\r\n    const animate = () => {\r\n      const elapsed = Date.now() - startTime;\r\n      const t = Math.min(elapsed / duration, 1);\r\n\r\n      // Easing function\r\n      const eased = d3.easeCubicInOut(t);\r\n\r\n      // Interpolate center\r\n      const interpCenter: [number, number] = [\r\n        startCenter[0] + (center[0] - startCenter[0]) * eased,\r\n        startCenter[1] + (center[1] - startCenter[1]) * eased,\r\n      ];\r\n\r\n      // Interpolate scale\r\n      const interpScale = startScale + (scale - startScale) * eased;\r\n\r\n      // Update projection\r\n      this.setCenter(interpCenter, false);\r\n      this.setScale(interpScale, false);\r\n\r\n      // Trigger render\r\n      this.onProjectionChange.next();\r\n\r\n      if (t < 1) {\r\n        requestAnimationFrame(animate);\r\n      } else {\r\n        // Ensure targets are synchronized at end of animation\r\n        this.targetRotation = [...this.currentRotation];\r\n        this.targetScale = this.currentScale;\r\n        this.scaleVelocity = 0;\r\n        callback?.();\r\n      }\r\n    };\r\n\r\n    requestAnimationFrame(animate);\r\n  }\r\n\r\n  /**\r\n   * Reset projection to initial state\r\n   */\r\n  reset(duration: number = 750, callback?: () => void): void {\r\n    this.animateTo(this.initialCenter, 1, duration, callback);\r\n  }\r\n\r\n  /**\r\n   * Get current projection state\r\n   */\r\n  getCurrentState() {\r\n    return {\r\n      center: [...this.currentCenter] as [number, number],\r\n      scale: this.currentScale / this.initialScale,\r\n      rotation: [...this.currentRotation] as [number, number, number],\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Destroy and cleanup\r\n   */\r\n  destroy(element: Element): void {\r\n    const el = element as HTMLElement;\r\n\r\n    // Remove event listeners from element\r\n    el.removeEventListener('mousedown', this.boundMouseDown);\r\n    el.removeEventListener('wheel', this.boundWheel);\r\n    el.removeEventListener('touchstart', this.boundTouchStart);\r\n    el.removeEventListener('touchmove', this.boundTouchMove);\r\n    el.removeEventListener('touchend', this.boundTouchEnd);\r\n\r\n    // Remove event listeners from document\r\n    document.removeEventListener('mousemove', this.boundMouseMove);\r\n    document.removeEventListener('mouseup', this.boundMouseUp);\r\n\r\n    this.onProjectionChange.complete();\r\n  }\r\n}\r\n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [],
                "line": 59
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "MapRendererService",
            "id": "injectable-MapRendererService-54541aea99ec546bdcb25fd9136454f11e79f85aeffcc48e0fd4dcc134077eeebf25027edb0a0f0b0f08638869091e269c2206a4f3ffa8241f33f299a7b8a48b",
            "file": "src/app/components/map-container/services/map-renderer.service.ts",
            "properties": [],
            "methods": [
                {
                    "name": "clear",
                    "args": [
                        {
                            "name": "renderContext",
                            "type": "RenderContext",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 192,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nClear the rendering context\n",
                    "description": "<p>Clear the rendering context</p>\n",
                    "jsdoctags": [
                        {
                            "name": "renderContext",
                            "type": "RenderContext",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "clearLayer",
                    "args": [
                        {
                            "name": "renderContext",
                            "type": "RenderContext",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "layer",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 208,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nClear a specific layer from the rendering context\n",
                    "description": "<p>Clear a specific layer from the rendering context</p>\n",
                    "jsdoctags": [
                        {
                            "name": "renderContext",
                            "type": "RenderContext",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "layer",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "initCanvasRenderer",
                    "args": [
                        {
                            "name": "container",
                            "type": "HTMLElement",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "width",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "height",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "projection",
                            "type": "GeoProjection",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "RenderContext",
                    "typeParameters": [],
                    "line": 47,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nInitialize Canvas renderer (for future implementation)\n",
                    "description": "<p>Initialize Canvas renderer (for future implementation)</p>\n",
                    "jsdoctags": [
                        {
                            "name": "container",
                            "type": "HTMLElement",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "width",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "height",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "projection",
                            "type": "GeoProjection",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "initSvgRenderer",
                    "args": [
                        {
                            "name": "container",
                            "type": "HTMLElement",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "width",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "height",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "projection",
                            "type": "GeoProjection",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "RenderContext",
                    "typeParameters": [],
                    "line": 22,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nInitialize SVG renderer\n",
                    "description": "<p>Initialize SVG renderer</p>\n",
                    "jsdoctags": [
                        {
                            "name": "container",
                            "type": "HTMLElement",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "width",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "height",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "projection",
                            "type": "GeoProjection",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "renderCanvas",
                    "args": [
                        {
                            "name": "renderContext",
                            "type": "RenderContext",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "data",
                            "type": "FeatureCollection",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "options",
                            "type": "literal type",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "optional": true
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 135,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRender to Canvas\n",
                    "description": "<p>Render to Canvas</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "renderContext",
                            "type": "RenderContext",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "data",
                            "type": "FeatureCollection",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "options",
                            "type": "literal type",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "optional": true,
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "renderGeoJson",
                    "args": [
                        {
                            "name": "renderContext",
                            "type": "RenderContext",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "data",
                            "type": "FeatureCollection",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "options",
                            "type": "literal type",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "optional": true
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 77,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRender GeoJSON data\n",
                    "description": "<p>Render GeoJSON data</p>\n",
                    "jsdoctags": [
                        {
                            "name": "renderContext",
                            "type": "RenderContext",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "data",
                            "type": "FeatureCollection",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "options",
                            "type": "literal type",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "optional": true,
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "renderSvg",
                    "args": [
                        {
                            "name": "renderContext",
                            "type": "RenderContext",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "data",
                            "type": "FeatureCollection",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "options",
                            "type": "literal type",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "optional": true
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 95,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRender to SVG\n",
                    "description": "<p>Render to SVG</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "renderContext",
                            "type": "RenderContext",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "data",
                            "type": "FeatureCollection",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "options",
                            "type": "literal type",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "optional": true,
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "updateProjection",
                    "args": [
                        {
                            "name": "renderContext",
                            "type": "RenderContext",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "projection",
                            "type": "GeoProjection",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 222,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nUpdate projection for render context\n",
                    "description": "<p>Update projection for render context</p>\n",
                    "jsdoctags": [
                        {
                            "name": "renderContext",
                            "type": "RenderContext",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "projection",
                            "type": "GeoProjection",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "",
            "rawdescription": "\n",
            "sourceCode": "import { Injectable } from '@angular/core';\r\nimport * as d3 from 'd3';\r\nimport { GeoPath, GeoProjection } from 'd3-geo';\r\nimport { FeatureCollection } from 'geojson';\r\nimport { RenderMode } from '../models/map.types';\r\n\r\nexport interface RenderContext {\r\n  svg?: d3.Selection<SVGSVGElement, unknown, null, undefined>;\r\n  canvas?: HTMLCanvasElement;\r\n  context?: CanvasRenderingContext2D;\r\n  mode: RenderMode;\r\n  path: GeoPath;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class MapRendererService {\r\n  /**\r\n   * Initialize SVG renderer\r\n   */\r\n  initSvgRenderer(\r\n    container: HTMLElement,\r\n    width: number,\r\n    height: number,\r\n    projection: GeoProjection\r\n  ): RenderContext {\r\n    const svg = d3\r\n      .select(container)\r\n      .append('svg')\r\n      .attr('width', width)\r\n      .attr('height', height)\r\n      .attr('class', 'map-svg');\r\n\r\n    const path = d3.geoPath().projection(projection);\r\n\r\n    return {\r\n      svg,\r\n      mode: 'svg',\r\n      path,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Initialize Canvas renderer (for future implementation)\r\n   */\r\n  initCanvasRenderer(\r\n    container: HTMLElement,\r\n    width: number,\r\n    height: number,\r\n    projection: GeoProjection\r\n  ): RenderContext {\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n    canvas.className = 'map-canvas';\r\n    container.appendChild(canvas);\r\n\r\n    const context = canvas.getContext('2d');\r\n    if (!context) {\r\n      throw new Error('Could not get 2D context from canvas');\r\n    }\r\n\r\n    const path = d3.geoPath().projection(projection).context(context);\r\n\r\n    return {\r\n      canvas,\r\n      context,\r\n      mode: 'canvas',\r\n      path,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Render GeoJSON data\r\n   */\r\n  renderGeoJson(\r\n    renderContext: RenderContext,\r\n    data: FeatureCollection,\r\n    options?: {\r\n      layer?: string;\r\n      style?: { fill?: string; stroke?: string; strokeWidth?: number; fillOpacity?: number };\r\n    }\r\n  ): void {\r\n    if (renderContext.mode === 'svg' && renderContext.svg) {\r\n      this.renderSvg(renderContext, data, options);\r\n    } else if (renderContext.mode === 'canvas' && renderContext.context) {\r\n      this.renderCanvas(renderContext, data, options);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render to SVG\r\n   */\r\n  private renderSvg(\r\n    renderContext: RenderContext,\r\n    data: FeatureCollection,\r\n    options?: {\r\n      layer?: string;\r\n      style?: { fill?: string; stroke?: string; strokeWidth?: number; fillOpacity?: number };\r\n    }\r\n  ): void {\r\n    if (!renderContext.svg) return;\r\n\r\n    const layer = options?.layer || 'base';\r\n    const defaults = { fill: '#ccc', stroke: '#333', strokeWidth: 0.5, fillOpacity: 1 };\r\n    const style = Object.assign({}, defaults, options?.style || {});\r\n\r\n    // Remove existing paths for this layer only\r\n    renderContext.svg.selectAll(`path.layer-${layer}`).remove();\r\n\r\n    // Add new paths for this layer - one path per feature\r\n    // NOTE: Polygon winding order (clockwise vs counter-clockwise) determines\r\n    // which area gets filled in SVG. Counter-clockwise fills the interior,\r\n    // clockwise fills the exterior. The 'fill-rule' attribute can help handle\r\n    // edge cases, but correct winding order in source data is preferred.\r\n    const fillOpacity = style.fillOpacity ?? defaults.fillOpacity;\r\n    renderContext.svg\r\n      .selectAll(`path.layer-${layer}`)\r\n      .data(data.features, (d: any, i: number) => i)\r\n      .enter()\r\n      .append('path')\r\n      .attr('d', (d: any) => renderContext.path(d))\r\n      .attr('class', `geo-feature layer-${layer}`)\r\n      .attr('fill', style.fill ?? defaults.fill)\r\n      .attr('fill-opacity', String(fillOpacity))\r\n      .attr('fill-rule', 'evenodd') // Helps with complex polygons, but doesn't fix inverted winding\r\n      .attr('stroke', style.stroke ?? defaults.stroke)\r\n      .attr('stroke-width', String(style.strokeWidth ?? defaults.strokeWidth));\r\n  }\r\n\r\n  /**\r\n   * Render to Canvas\r\n   */\r\n  private renderCanvas(\r\n    renderContext: RenderContext,\r\n    data: FeatureCollection,\r\n    options?: {\r\n      layer?: string;\r\n      style?: { fill?: string; stroke?: string; strokeWidth?: number; fillOpacity?: number };\r\n    }\r\n  ): void {\r\n    if (!renderContext.context || !renderContext.canvas) return;\r\n\r\n    const ctx = renderContext.context;\r\n    const canvas = renderContext.canvas;\r\n    const layer = options?.layer || 'base';\r\n    const defaults = { fill: '#ccc', stroke: '#333', strokeWidth: 0.5, fillOpacity: 1 };\r\n    const style = Object.assign({}, defaults, options?.style || {});\r\n\r\n    // Clear canvas only when drawing the base layer so overlays can be drawn on top\r\n    if (layer === 'base') {\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n\r\n    // Draw each feature applying style\r\n    ctx.save();\r\n\r\n    // Set fill and stroke styles\r\n    const hasFill = typeof style.fill === 'string' && style.fill.toLowerCase() !== 'none';\r\n    const fillOpacity = typeof style.fillOpacity === 'number' ? style.fillOpacity : 1;\r\n\r\n    if (hasFill) {\r\n      ctx.fillStyle = style.fill || defaults.fill;\r\n      ctx.globalAlpha = fillOpacity;\r\n    }\r\n\r\n    ctx.strokeStyle = style.stroke || defaults.stroke;\r\n    ctx.lineWidth = style.strokeWidth ?? defaults.strokeWidth;\r\n\r\n    for (const feature of data.features) {\r\n      ctx.beginPath();\r\n      renderContext.path(feature as any);\r\n\r\n      // Fill if applicable\r\n      if (hasFill) {\r\n        ctx.fill();\r\n      }\r\n\r\n      // Stroke if not 'none'\r\n      if (!(typeof style.stroke === 'string' && style.stroke.toLowerCase() === 'none')) {\r\n        ctx.stroke();\r\n      }\r\n    }\r\n\r\n    ctx.restore();\r\n  }\r\n\r\n  /**\r\n   * Clear the rendering context\r\n   */\r\n  clear(renderContext: RenderContext): void {\r\n    if (renderContext.mode === 'svg' && renderContext.svg) {\r\n      renderContext.svg.selectAll('*').remove();\r\n    } else if (renderContext.mode === 'canvas' && renderContext.context && renderContext.canvas) {\r\n      renderContext.context.clearRect(\r\n        0,\r\n        0,\r\n        renderContext.canvas.width,\r\n        renderContext.canvas.height\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear a specific layer from the rendering context\r\n   */\r\n  clearLayer(renderContext: RenderContext, layer: string): void {\r\n    if (renderContext.mode === 'svg' && renderContext.svg) {\r\n      renderContext.svg.selectAll(`path.layer-${layer}`).remove();\r\n    } else if (renderContext.mode === 'canvas') {\r\n      // For canvas, we need to re-render all other layers\r\n      // This is a limitation of canvas - can't selectively remove\r\n      // For now, we'll just note this - full implementation would require layer tracking\r\n      console.warn('Canvas layer clearing not fully implemented - consider re-rendering');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update projection for render context\r\n   */\r\n  updateProjection(renderContext: RenderContext, projection: GeoProjection): void {\r\n    renderContext.path = d3.geoPath().projection(projection);\r\n    if (renderContext.mode === 'canvas' && renderContext.context) {\r\n      renderContext.path.context(renderContext.context);\r\n    }\r\n  }\r\n}\r\n",
            "extends": [],
            "type": "injectable"
        }
    ],
    "guards": [],
    "interceptors": [],
    "classes": [],
    "directives": [],
    "components": [
        {
            "name": "App",
            "id": "component-App-f1f40dd95d6cffe36e0a92d12e2196f791a033af3bf837a36195d5238a89ca155edb90ad4190c465cedd86a074aeda8f3b00d218664fd3899905d2b5a28a9d7f",
            "file": "src/app/app.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-root",
            "styleUrls": [],
            "styles": [],
            "templateUrl": [
                "./app.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "currentFps",
                    "defaultValue": "signal<number>(0)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 22,
                    "modifierKind": [
                        124,
                        148
                    ]
                },
                {
                    "name": "geoData",
                    "defaultValue": "signal<FeatureCollection>(worldData as FeatureCollection)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 21,
                    "modifierKind": [
                        124,
                        148
                    ]
                },
                {
                    "name": "mapComponent",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "MapContainerComponent",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 17,
                    "decorators": [
                        {
                            "name": "ViewChild",
                            "stringifiedArguments": "MapContainerComponent"
                        }
                    ],
                    "modifierKind": [
                        171
                    ]
                },
                {
                    "name": "subtitle",
                    "defaultValue": "signal('Demonstrating proper projection with smooth animations')",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 20,
                    "modifierKind": [
                        124,
                        148
                    ]
                },
                {
                    "name": "title",
                    "defaultValue": "signal('D3 Animated Map Reference')",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 19,
                    "modifierKind": [
                        124,
                        148
                    ]
                }
            ],
            "methodsClass": [
                {
                    "name": "handleFpsUpdate",
                    "args": [
                        {
                            "name": "fps",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 122,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "fps",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "ngOnInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 24,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "playContinentTour",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 69,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nDemo animation: Zoom to different continents\n",
                    "description": "<p>Demo animation: Zoom to different continents</p>\n"
                },
                {
                    "name": "playWorldTour",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 31,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nDemo animation sequence: Tour of major cities\n",
                    "description": "<p>Demo animation sequence: Tour of major cities</p>\n"
                },
                {
                    "name": "resetMap",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 118,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "stopAnimation",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 114,
                    "deprecated": false,
                    "deprecationMessage": ""
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": false,
            "imports": [
                {
                    "name": "RouterOutlet"
                },
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "MapContainerComponent",
                    "type": "component"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, signal, ViewChild, OnInit } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { MapContainerComponent } from './components/map-container/map-container.component';\r\nimport { AnimationSequence } from './components/map-container/services/animation-controller.service';\r\nimport { FeatureCollection } from 'geojson';\r\n// import worldData from './data/world-110m.json';\r\nimport worldData from './data/world.json';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  imports: [RouterOutlet, CommonModule, MapContainerComponent],\r\n  templateUrl: './app.html',\r\n  styleUrl: './app.scss',\r\n})\r\nexport class App implements OnInit {\r\n  @ViewChild(MapContainerComponent) mapComponent?: MapContainerComponent;\r\n\r\n  protected readonly title = signal('D3 Animated Map Reference');\r\n  protected readonly subtitle = signal('Demonstrating proper projection with smooth animations');\r\n  protected readonly geoData = signal<FeatureCollection>(worldData as FeatureCollection);\r\n  protected readonly currentFps = signal<number>(0);\r\n\r\n  ngOnInit(): void {\r\n    // Data will be loaded on component initialization\r\n  }\r\n\r\n  /**\r\n   * Demo animation sequence: Tour of major cities\r\n   */\r\n  playWorldTour(): void {\r\n    const sequence: AnimationSequence = {\r\n      steps: [\r\n        {\r\n          extent: { center: [-74.006, 40.7128], scale: 4 },\r\n          duration: 1500,\r\n          label: 'New York',\r\n        },\r\n        {\r\n          extent: { center: [-0.1276, 51.5074], scale: 4 },\r\n          duration: 1500,\r\n          label: 'London',\r\n        },\r\n        {\r\n          extent: { center: [139.6917, 35.6895], scale: 4 },\r\n          duration: 1500,\r\n          label: 'Tokyo',\r\n        },\r\n        {\r\n          extent: { center: [151.2093, -33.8688], scale: 4 },\r\n          duration: 1500,\r\n          label: 'Sydney',\r\n        },\r\n        {\r\n          extent: { center: [0, 0], scale: 1 },\r\n          duration: 1500,\r\n          label: 'World View',\r\n        },\r\n      ],\r\n      loop: false,\r\n    };\r\n\r\n    this.mapComponent?.playAnimation(sequence);\r\n  }\r\n\r\n  /**\r\n   * Demo animation: Zoom to different continents\r\n   */\r\n  playContinentTour(): void {\r\n    const sequence: AnimationSequence = {\r\n      steps: [\r\n        {\r\n          extent: { center: [-95, 37], scale: 2.5 },\r\n          duration: 1200,\r\n          label: 'North America',\r\n        },\r\n        {\r\n          extent: { center: [-60, -15], scale: 2.5 },\r\n          duration: 1200,\r\n          label: 'South America',\r\n        },\r\n        {\r\n          extent: { center: [15, 50], scale: 3 },\r\n          duration: 1200,\r\n          label: 'Europe',\r\n        },\r\n        {\r\n          extent: { center: [20, 0], scale: 2.5 },\r\n          duration: 1200,\r\n          label: 'Africa',\r\n        },\r\n        {\r\n          extent: { center: [90, 35], scale: 2 },\r\n          duration: 1200,\r\n          label: 'Asia',\r\n        },\r\n        {\r\n          extent: { center: [135, -25], scale: 3.5 },\r\n          duration: 1200,\r\n          label: 'Australia',\r\n        },\r\n        {\r\n          extent: { center: [0, 20], scale: 1 },\r\n          duration: 1500,\r\n          label: 'World View',\r\n        },\r\n      ],\r\n      loop: false,\r\n    };\r\n\r\n    this.mapComponent?.playAnimation(sequence);\r\n  }\r\n\r\n  stopAnimation(): void {\r\n    this.mapComponent?.stopAnimation();\r\n  }\r\n\r\n  resetMap(): void {\r\n    this.mapComponent?.resetZoom();\r\n  }\r\n\r\n  handleFpsUpdate(fps: number): void {\r\n    this.currentFps.set(fps);\r\n  }\r\n}\r\n",
            "styleUrl": "./app.scss",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "",
            "extends": [],
            "implements": [
                "OnInit"
            ],
            "templateData": "<div class=\"app-container\">\r\n  <header class=\"app-header\">\r\n    <h1>{{ title() }}</h1>\r\n\r\n    <p>{{ subtitle() }}</p>\r\n\r\n    <hr />\r\n  </header>\r\n\r\n  <main class=\"app-main\">\r\n    <div class=\"map-section\">\r\n      <app-map-container\r\n        [width]=\"566\"\r\n        [height]=\"320\"\r\n        [renderMode]=\"'svg'\"\r\n        [geoData]=\"geoData()\"\r\n        (fpsUpdate)=\"handleFpsUpdate($event)\"\r\n        [showTissot]=\"true\"\r\n      />\r\n    </div>\r\n\r\n    <aside class=\"controls-panel\">\r\n      <h2>Interactive Controls</h2>\r\n\r\n      <section class=\"control-group\">\r\n        <h3>User Interactions</h3>\r\n        <p class=\"info-text\">\r\n           <strong>Click and drag</strong> to pan<br />\r\n           <strong>Scroll</strong> to zoom in/out\r\n        </p>\r\n        <button (click)=\"resetMap()\" class=\"btn btn-secondary\">Reset View</button>\r\n      </section>\r\n\r\n      <section class=\"control-group\">\r\n        <h3>Programmatic Animations</h3>\r\n        <p class=\"info-text\">Pre-defined animation sequences demonstrating smooth transitions</p>\r\n        <div class=\"button-group\">\r\n          <button (click)=\"playContinentTour()\" class=\"btn btn-primary\">Continent Tour</button>\r\n          <button (click)=\"playWorldTour()\" class=\"btn btn-primary\">World Cities</button>\r\n          <button (click)=\"stopAnimation()\" class=\"btn btn-danger\">Stop</button>\r\n        </div>\r\n      </section>\r\n\r\n      <section class=\"control-group\">\r\n        <h3>Performance</h3>\r\n        @if (currentFps() > 0) {\r\n        <div class=\"performance-indicator\" [class.fps-good]=\"currentFps() >= 23\">\r\n          <span class=\"fps-value\">{{ currentFps() }} FPS</span>\r\n          <span class=\"fps-status\">\r\n            {{ currentFps() >= 23 ? ' Target Met (>23fps)' : ' Below Target' }}\r\n          </span>\r\n        </div>\r\n        } @else {\r\n        <p class=\"info-text\">Start an animation to monitor FPS</p>\r\n        }\r\n      </section>\r\n\r\n      <section class=\"control-group\">\r\n        <h3>Technical Details</h3>\r\n        <ul class=\"tech-list\">\r\n          <li><strong>Projection:</strong> Equirectangular (flat)</li>\r\n          <li><strong>Renderer:</strong> SVG (Canvas-ready)</li>\r\n          <li><strong>Data Format:</strong> GeoJSON</li>\r\n          <li><strong>Framework:</strong> Angular + D3</li>\r\n        </ul>\r\n      </section>\r\n    </aside>\r\n  </main>\r\n\r\n  <footer class=\"app-footer\">\r\n    <p>\r\n      Reference implementation for D3 animated maps with proper projection  Inspired by\r\n      <a href=\"https://github.com/vasturiano/d3-geo-zoom\" target=\"_blank\" rel=\"noopener\"\r\n        >d3-geo-zoom</a\r\n      >\r\n    </p>\r\n  </footer>\r\n</div>\r\n\r\n<router-outlet />\r\n"
        },
        {
            "name": "ButtonComponent",
            "id": "component-ButtonComponent-5747b2121bdc472b32e41e4e47db44dbd7601fe73e9c7b3d0f82e7d1aaf97be0d13d4880fee19b0e4d511178aa52a24a5a9ea3ee0034d204ffd659c0aae43e41",
            "file": "src/stories/button.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "storybook-button",
            "styleUrls": [
                "./button.css"
            ],
            "styles": [],
            "template": " <button  type=\"button\"\n  (click)=\"onClick.emit($event)\"\n  [ngClass]=\"classes\"\n  [ngStyle]=\"{ 'background-color': backgroundColor }\"\n>\n  {{ label }}\n</button>",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "backgroundColor",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nWhat background color to use",
                    "description": "<p>What background color to use</p>\n",
                    "line": 25,
                    "type": "string",
                    "decorators": []
                },
                {
                    "name": "label",
                    "defaultValue": "'Button'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "pos": 793,
                            "end": 807,
                            "kind": 328,
                            "id": 0,
                            "flags": 16842752,
                            "modifierFlagsCache": 0,
                            "transformFlags": 0,
                            "tagName": {
                                "pos": 794,
                                "end": 802,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "required"
                            },
                            "comment": ""
                        }
                    ],
                    "rawdescription": "\n\nButton contents\n\n",
                    "description": "<p>Button contents</p>\n",
                    "line": 37,
                    "type": "string",
                    "decorators": []
                },
                {
                    "name": "primary",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nIs this the principal call to action on the page?",
                    "description": "<p>Is this the principal call to action on the page?</p>\n",
                    "line": 21,
                    "type": "boolean",
                    "decorators": []
                },
                {
                    "name": "size",
                    "defaultValue": "'medium'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nHow large should the button be?",
                    "description": "<p>How large should the button be?</p>\n",
                    "line": 29,
                    "type": "\"small\" | \"medium\" | \"large\"",
                    "decorators": []
                }
            ],
            "outputsClass": [
                {
                    "name": "onClick",
                    "defaultValue": "new EventEmitter<Event>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nOptional click handler",
                    "description": "<p>Optional click handler</p>\n",
                    "line": 41,
                    "type": "EventEmitter"
                }
            ],
            "propertiesClass": [],
            "methodsClass": [],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { CommonModule } from '@angular/common';\r\nimport { Component, Input, Output, EventEmitter } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'storybook-button',\r\n  standalone: true,\r\n  imports: [CommonModule],\r\n  template: ` <button\r\n  type=\"button\"\r\n  (click)=\"onClick.emit($event)\"\r\n  [ngClass]=\"classes\"\r\n  [ngStyle]=\"{ 'background-color': backgroundColor }\"\r\n>\r\n  {{ label }}\r\n</button>`,\r\n  styleUrls: ['./button.css'],\r\n})\r\nexport class ButtonComponent {\r\n  /** Is this the principal call to action on the page? */\r\n  @Input()\r\n  primary = false;\r\n\r\n  /** What background color to use */\r\n  @Input()\r\n  backgroundColor?: string;\r\n\r\n  /** How large should the button be? */\r\n  @Input()\r\n  size: 'small' | 'medium' | 'large' = 'medium';\r\n\r\n  /**\r\n   * Button contents\r\n   *\r\n   * @required\r\n   */\r\n  @Input()\r\n  label = 'Button';\r\n\r\n  /** Optional click handler */\r\n  @Output()\r\n  onClick = new EventEmitter<Event>();\r\n\r\n  public get classes(): string[] {\r\n    const mode = this.primary ? 'storybook-button--primary' : 'storybook-button--secondary';\r\n\r\n    return ['storybook-button', `storybook-button--${this.size}`, mode];\r\n  }\r\n}\r\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ".storybook-button {\r\n  display: inline-block;\r\n  cursor: pointer;\r\n  border: 0;\r\n  border-radius: 3em;\r\n  font-weight: 700;\r\n  line-height: 1;\r\n  font-family: 'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\r\n}\r\n.storybook-button--primary {\r\n  background-color: #555ab9;\r\n  color: white;\r\n}\r\n.storybook-button--secondary {\r\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 0px 1px inset;\r\n  background-color: transparent;\r\n  color: #333;\r\n}\r\n.storybook-button--small {\r\n  padding: 10px 16px;\r\n  font-size: 12px;\r\n}\r\n.storybook-button--medium {\r\n  padding: 11px 20px;\r\n  font-size: 14px;\r\n}\r\n.storybook-button--large {\r\n  padding: 12px 24px;\r\n  font-size: 16px;\r\n}\r\n",
                    "styleUrl": "./button.css"
                }
            ],
            "stylesData": "",
            "extends": [],
            "accessors": {
                "classes": {
                    "name": "classes",
                    "getSignature": {
                        "name": "classes",
                        "type": "[]",
                        "returnType": "string[]",
                        "line": 43
                    }
                }
            }
        },
        {
            "name": "HeaderComponent",
            "id": "component-HeaderComponent-35575735b3444c6f049822f5234963ce3b046795ea9cdf6a15e8c7d72acd8ededb78ca25c4e1fbb5f0416c5855203a87ae0483f5d065c2dfa68d5329e347a84b",
            "file": "src/stories/header.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "storybook-header",
            "styleUrls": [
                "./header.css"
            ],
            "styles": [],
            "template": "<header>  <div class=\"storybook-header\">\n    <div>\n      <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <path\n            d=\"M10 0h12a10 10 0 0110 10v12a10 10 0 01-10 10H10A10 10 0 010 22V10A10 10 0 0110 0z\"\n            fill=\"#FFF\"\n          />\n          <path\n            d=\"M5.3 10.6l10.4 6v11.1l-10.4-6v-11zm11.4-6.2l9.7 5.5-9.7 5.6V4.4z\"\n            fill=\"#555AB9\"\n          />\n          <path d=\"M27.2 10.6v11.2l-10.5 6V16.5l10.5-6zM15.7 4.4v11L6 10l9.7-5.5z\" fill=\"#91BAF8\" />\n        </g>\n      </svg>\n      <h1>Acme</h1>\n    </div>\n    <div>\n      <div *ngIf=\"user\">\n        <span class=\"welcome\">\n          Welcome, <b>{{ user.name }}</b\n          >!\n        </span>\n        <storybook-button\n          *ngIf=\"user\"\n          size=\"small\"\n          (onClick)=\"onLogout.emit($event)\"\n          label=\"Log out\"\n        ></storybook-button>\n      </div>\n      <div *ngIf=\"!user\">\n        <storybook-button\n          *ngIf=\"!user\"\n          size=\"small\"\n          class=\"margin-left\"\n          (onClick)=\"onLogin.emit($event)\"\n          label=\"Log in\"\n        ></storybook-button>\n        <storybook-button\n          *ngIf=\"!user\"\n          size=\"small\"\n          [primary]=\"true\"\n          class=\"margin-left\"\n          (onClick)=\"onCreateAccount.emit($event)\"\n          label=\"Sign up\"\n        ></storybook-button>\n      </div>\n    </div>\n  </div>\n</header>",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "user",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 66,
                    "type": "User | null",
                    "decorators": []
                }
            ],
            "outputsClass": [
                {
                    "name": "onCreateAccount",
                    "defaultValue": "new EventEmitter<Event>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 75,
                    "type": "EventEmitter"
                },
                {
                    "name": "onLogin",
                    "defaultValue": "new EventEmitter<Event>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 69,
                    "type": "EventEmitter"
                },
                {
                    "name": "onLogout",
                    "defaultValue": "new EventEmitter<Event>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 72,
                    "type": "EventEmitter"
                }
            ],
            "propertiesClass": [],
            "methodsClass": [],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "ButtonComponent",
                    "type": "component"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, Input, Output, EventEmitter } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { ButtonComponent } from './button.component';\r\nimport type { User } from './user';\r\n\r\n@Component({\r\n  selector: 'storybook-header',\r\n  standalone: true,\r\n  imports: [CommonModule, ButtonComponent],\r\n  template: `<header>\r\n  <div class=\"storybook-header\">\r\n    <div>\r\n      <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <g fill=\"none\" fillRule=\"evenodd\">\r\n          <path\r\n            d=\"M10 0h12a10 10 0 0110 10v12a10 10 0 01-10 10H10A10 10 0 010 22V10A10 10 0 0110 0z\"\r\n            fill=\"#FFF\"\r\n          />\r\n          <path\r\n            d=\"M5.3 10.6l10.4 6v11.1l-10.4-6v-11zm11.4-6.2l9.7 5.5-9.7 5.6V4.4z\"\r\n            fill=\"#555AB9\"\r\n          />\r\n          <path d=\"M27.2 10.6v11.2l-10.5 6V16.5l10.5-6zM15.7 4.4v11L6 10l9.7-5.5z\" fill=\"#91BAF8\" />\r\n        </g>\r\n      </svg>\r\n      <h1>Acme</h1>\r\n    </div>\r\n    <div>\r\n      <div *ngIf=\"user\">\r\n        <span class=\"welcome\">\r\n          Welcome, <b>{{ user.name }}</b\r\n          >!\r\n        </span>\r\n        <storybook-button\r\n          *ngIf=\"user\"\r\n          size=\"small\"\r\n          (onClick)=\"onLogout.emit($event)\"\r\n          label=\"Log out\"\r\n        ></storybook-button>\r\n      </div>\r\n      <div *ngIf=\"!user\">\r\n        <storybook-button\r\n          *ngIf=\"!user\"\r\n          size=\"small\"\r\n          class=\"margin-left\"\r\n          (onClick)=\"onLogin.emit($event)\"\r\n          label=\"Log in\"\r\n        ></storybook-button>\r\n        <storybook-button\r\n          *ngIf=\"!user\"\r\n          size=\"small\"\r\n          [primary]=\"true\"\r\n          class=\"margin-left\"\r\n          (onClick)=\"onCreateAccount.emit($event)\"\r\n          label=\"Sign up\"\r\n        ></storybook-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</header>`,\r\n  styleUrls: ['./header.css'],\r\n})\r\nexport class HeaderComponent {\r\n  @Input()\r\n  user: User | null = null;\r\n\r\n  @Output()\r\n  onLogin = new EventEmitter<Event>();\r\n\r\n  @Output()\r\n  onLogout = new EventEmitter<Event>();\r\n\r\n  @Output()\r\n  onCreateAccount = new EventEmitter<Event>();\r\n}\r\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ".storybook-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\r\n  padding: 15px 20px;\r\n  font-family: 'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\r\n}\r\n\r\n.storybook-header svg {\r\n  display: inline-block;\r\n  vertical-align: top;\r\n}\r\n\r\n.storybook-header h1 {\r\n  display: inline-block;\r\n  vertical-align: top;\r\n  margin: 6px 0 6px 10px;\r\n  font-weight: 700;\r\n  font-size: 20px;\r\n  line-height: 1;\r\n}\r\n\r\n.storybook-header button + button {\r\n  margin-left: 10px;\r\n}\r\n\r\n.storybook-header .welcome {\r\n  margin-right: 10px;\r\n  color: #333;\r\n  font-size: 14px;\r\n}\r\n",
                    "styleUrl": "./header.css"
                }
            ],
            "stylesData": "",
            "extends": []
        },
        {
            "name": "MapContainerComponent",
            "id": "component-MapContainerComponent-9eb3e0dcb7774b78e2794a629bc267e7ce22401895f1bc9b978e20397027fc247e17695727d79dc45800abca2e3d8add98d9270773495c2c1d198d3665b88775",
            "file": "src/app/components/map-container/map-container.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-map-container",
            "styleUrls": [],
            "styles": [],
            "templateUrl": [
                "./map-container.component.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "geoData",
                    "defaultValue": "sampleGeoData as FeatureCollection",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "FeatureCollection",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 45,
                    "modifierKind": [
                        148
                    ],
                    "required": false
                },
                {
                    "name": "height",
                    "defaultValue": "600",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 43,
                    "modifierKind": [
                        148
                    ],
                    "required": false
                },
                {
                    "name": "renderMode",
                    "defaultValue": "'svg'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "RenderMode",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 44,
                    "modifierKind": [
                        148
                    ],
                    "required": false
                },
                {
                    "name": "showTissot",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 46,
                    "modifierKind": [
                        148
                    ],
                    "required": false
                },
                {
                    "name": "tissotGeoJson",
                    "defaultValue": "undefined",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "FeatureCollection | undefined",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 47,
                    "modifierKind": [
                        148
                    ],
                    "required": false
                },
                {
                    "name": "width",
                    "defaultValue": "960",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 42,
                    "modifierKind": [
                        148
                    ],
                    "required": false
                }
            ],
            "outputsClass": [
                {
                    "name": "fpsUpdate",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 50,
                    "modifierKind": [
                        148
                    ],
                    "required": false
                },
                {
                    "name": "zoomChange",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ZoomEvent",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 49,
                    "modifierKind": [
                        148
                    ],
                    "required": false
                }
            ],
            "propertiesClass": [
                {
                    "name": "animationController",
                    "defaultValue": "inject(AnimationControllerService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 63,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "currentFps",
                    "defaultValue": "signal<number>(0)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 53,
                    "modifierKind": [
                        124,
                        148
                    ]
                },
                {
                    "name": "currentStep",
                    "defaultValue": "signal<string>('')",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 55,
                    "modifierKind": [
                        124,
                        148
                    ]
                },
                {
                    "name": "destroyRef",
                    "defaultValue": "inject(DestroyRef)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 64,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "geoDataSignal",
                    "defaultValue": "signal<FeatureCollection | undefined>(undefined)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 56,
                    "modifierKind": [
                        124,
                        148
                    ]
                },
                {
                    "name": "geoZoom",
                    "defaultValue": "inject(GeoZoomService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 62,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "isAnimating",
                    "defaultValue": "signal<boolean>(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 54,
                    "modifierKind": [
                        124,
                        148
                    ]
                },
                {
                    "name": "mapContainer",
                    "defaultValue": "viewChild<ElementRef<HTMLDivElement>>('mapContainer')",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 40,
                    "modifierKind": [
                        148
                    ]
                },
                {
                    "name": "mapRenderer",
                    "defaultValue": "inject(MapRendererService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 61,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "projection",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "d3.GeoProjection",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 58,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "renderContext",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "RenderContext",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 59,
                    "modifierKind": [
                        123
                    ]
                }
            ],
            "methodsClass": [
                {
                    "name": "handleProjectionChange",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 207,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nHandle projection change events - re-render the map\n",
                    "description": "<p>Handle projection change events - re-render the map</p>\n",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "initializeMap",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 110,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nInitialize the map\n",
                    "description": "<p>Initialize the map</p>\n",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "ngAfterViewInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 102,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "panTo",
                    "args": [
                        {
                            "name": "coordinates",
                            "type": "[number, number]",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "duration",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "750"
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 303,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nPan to specific coordinates\n",
                    "description": "<p>Pan to specific coordinates</p>\n",
                    "jsdoctags": [
                        {
                            "name": "coordinates",
                            "type": "[number, number]",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "duration",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "750",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "pauseAnimation",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 272,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nPause animation\n",
                    "description": "<p>Pause animation</p>\n"
                },
                {
                    "name": "playAnimation",
                    "args": [
                        {
                            "name": "sequence",
                            "type": "AnimationSequence",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 255,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nPlay animation sequence\n",
                    "description": "<p>Play animation sequence</p>\n",
                    "jsdoctags": [
                        {
                            "name": "sequence",
                            "type": "AnimationSequence",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "renderData",
                    "args": [
                        {
                            "name": "data",
                            "type": "FeatureCollection",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 238,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRender GeoJSON data\n",
                    "description": "<p>Render GeoJSON data</p>\n",
                    "jsdoctags": [
                        {
                            "name": "data",
                            "type": "FeatureCollection",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "resetZoom",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 289,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nReset zoom to initial state\n",
                    "description": "<p>Reset zoom to initial state</p>\n"
                },
                {
                    "name": "resumeAnimation",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 279,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nResume animation\n",
                    "description": "<p>Resume animation</p>\n"
                },
                {
                    "name": "setupEventListeners",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 162,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nSetup event listeners\n",
                    "description": "<p>Setup event listeners</p>\n",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "stopAnimation",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 265,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nStop animation\n",
                    "description": "<p>Stop animation</p>\n"
                },
                {
                    "name": "updateData",
                    "args": [
                        {
                            "name": "data",
                            "type": "FeatureCollection",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 247,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nUpdate GeoJSON data\n",
                    "description": "<p>Update GeoJSON data</p>\n",
                    "jsdoctags": [
                        {
                            "name": "data",
                            "type": "FeatureCollection",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "zoomTo",
                    "args": [
                        {
                            "name": "scale",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "duration",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "750"
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 296,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nZoom to specific scale\n",
                    "description": "<p>Zoom to specific scale</p>\n",
                    "jsdoctags": [
                        {
                            "name": "scale",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "duration",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "750",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "zoomToExtent",
                    "args": [
                        {
                            "name": "bounds",
                            "type": "[unknown, unknown]",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "duration",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "750"
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 310,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nZoom to extent (center and scale to fit bounds)\n",
                    "description": "<p>Zoom to extent (center and scale to fit bounds)</p>\n",
                    "jsdoctags": [
                        {
                            "name": "bounds",
                            "type": "[unknown, unknown]",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "duration",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "750",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import {\r\n  Component,\r\n  ElementRef,\r\n  viewChild,\r\n  input,\r\n  output,\r\n  signal,\r\n  effect,\r\n  AfterViewInit,\r\n  DestroyRef,\r\n  inject,\r\n} from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\r\nimport * as d3 from 'd3';\r\nimport { FeatureCollection } from 'geojson';\r\nimport { MapRendererService, RenderContext } from './services/map-renderer.service';\r\nimport { GeoZoomService } from './services/geo-zoom.service';\r\nimport {\r\n  AnimationControllerService,\r\n  AnimationSequence,\r\n} from './services/animation-controller.service';\r\nimport { RenderMode, ZoomEvent } from './models/map.types';\r\nimport sampleGeoData from './sampleData/world.json';\r\nimport sampleTissot1000 from './sampleData/tissot_1000km_20deg.json';\r\nimport sampleTissotFiltered from './sampleData/tissot_1000km_20deg_filtered.json';\r\nimport sampleTissotFixed from './sampleData/tissot_1000km_20deg_fixed.json';\r\nimport sampleTissotTest from './sampleData/tissot_test_single.json';\r\nimport sampleTissotTest10 from './sampleData/tissot_test_10.json';\r\nimport sampleTissotTestFirst from './sampleData/tissot_test_first.json';\r\n\r\n@Component({\r\n  selector: 'app-map-container',\r\n  standalone: true,\r\n  imports: [CommonModule],\r\n  templateUrl: './map-container.component.html',\r\n  styleUrl: './map-container.component.scss',\r\n})\r\nexport class MapContainerComponent implements AfterViewInit {\r\n  readonly mapContainer = viewChild<ElementRef<HTMLDivElement>>('mapContainer');\r\n\r\n  readonly width = input(960);\r\n  readonly height = input(600);\r\n  readonly renderMode = input<RenderMode>('svg');\r\n  readonly geoData = input<FeatureCollection>(sampleGeoData as FeatureCollection);\r\n  readonly showTissot = input(false);\r\n  readonly tissotGeoJson = input<FeatureCollection | undefined>(undefined);\r\n\r\n  readonly zoomChange = output<ZoomEvent>();\r\n  readonly fpsUpdate = output<number>();\r\n\r\n  // Signals for reactive UI\r\n  protected readonly currentFps = signal<number>(0);\r\n  protected readonly isAnimating = signal<boolean>(false);\r\n  protected readonly currentStep = signal<string>('');\r\n  protected readonly geoDataSignal = signal<FeatureCollection | undefined>(undefined);\r\n\r\n  private projection?: d3.GeoProjection;\r\n  private renderContext?: RenderContext;\r\n\r\n  private mapRenderer = inject(MapRendererService);\r\n  private geoZoom = inject(GeoZoomService);\r\n  private animationController = inject(AnimationControllerService);\r\n  private destroyRef = inject(DestroyRef);\r\n\r\n  constructor() {\r\n    // Setup event listeners and re-render on data changes\r\n    effect(() => {\r\n      const data = this.geoData();\r\n      if (data) {\r\n        this.geoDataSignal.set(data);\r\n      }\r\n    });\r\n\r\n    effect(() => {\r\n      const data = this.geoDataSignal();\r\n      const show = this.showTissot(); // Add explicit dependency on showTissot\r\n      if (data && this.renderContext && this.projection) {\r\n        this.renderData(data);\r\n\r\n        // Render tissot overlay when enabled, clear it when disabled\r\n        // IMPORTANT: Tissot circle polygons MUST have counter-clockwise winding order\r\n        // for SVG fills to render correctly. Clockwise winding causes SVG to fill\r\n        // the EXTERIOR (entire map except circles), creating opaque rectangles.\r\n        // See: src/app/components/map-container/sampleData/README.md\r\n        if (show && this.renderContext) {\r\n          const tgeo = this.tissotGeoJson() || (sampleTissotFixed as FeatureCollection);\r\n          if (tgeo) {\r\n            this.mapRenderer.renderGeoJson(this.renderContext, tgeo, {\r\n              layer: 'tissot',\r\n              style: { fill: 'coral', stroke: 'none', fillOpacity: 0.25 },\r\n            });\r\n          }\r\n        } else if (this.renderContext) {\r\n          // Clear tissot layer when disabled\r\n          this.mapRenderer.clearLayer(this.renderContext, 'tissot');\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.initializeMap();\r\n    this.setupEventListeners();\r\n  }\r\n\r\n  /**\r\n   * Initialize the map\r\n   */\r\n  private initializeMap(): void {\r\n    const container = this.mapContainer();\r\n    if (!container) return;\r\n\r\n    // Create equirectangular projection\r\n    this.projection = d3\r\n      .geoEquirectangular()\r\n      .scale(this.width() / (2 * Math.PI))\r\n      .translate([this.width() / 2, this.height() / 2]);\r\n\r\n    // Initialize renderer\r\n    this.renderContext =\r\n      this.renderMode() === 'svg'\r\n        ? this.mapRenderer.initSvgRenderer(\r\n            container.nativeElement,\r\n            this.width(),\r\n            this.height(),\r\n            this.projection\r\n          )\r\n        : this.mapRenderer.initCanvasRenderer(\r\n            container.nativeElement,\r\n            this.width(),\r\n            this.height(),\r\n            this.projection\r\n          );\r\n\r\n    // Initialize zoom behavior\r\n    this.geoZoom.init(container.nativeElement, this.projection, this.width(), this.height(), {\r\n      scaleExtent: [0.5, 20],\r\n    });\r\n\r\n    // Render initial data if available\r\n    const data = this.geoData();\r\n    if (data) {\r\n      this.renderData(data);\r\n\r\n      // Render tissot overlay if enabled\r\n      if (this.showTissot()) {\r\n        const tgeo = this.tissotGeoJson() || (sampleTissotFixed as FeatureCollection);\r\n        if (tgeo) {\r\n          this.mapRenderer.renderGeoJson(this.renderContext!, tgeo, {\r\n            layer: 'tissot',\r\n            style: { fill: 'coral', stroke: 'none', fillOpacity: 0.25 },\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Setup event listeners\r\n   */\r\n  private setupEventListeners(): void {\r\n    // Listen to projection changes\r\n    this.geoZoom.onProjectionChange.pipe(takeUntilDestroyed(this.destroyRef)).subscribe(() => {\r\n      this.handleProjectionChange();\r\n    });\r\n\r\n    // Listen to FPS updates\r\n    this.animationController.onFpsUpdate\r\n      .pipe(takeUntilDestroyed(this.destroyRef))\r\n      .subscribe((fps) => {\r\n        this.currentFps.set(fps);\r\n        this.fpsUpdate.emit(fps);\r\n      });\r\n\r\n    // Listen to animation events\r\n    this.animationController.onAnimationStart\r\n      .pipe(takeUntilDestroyed(this.destroyRef))\r\n      .subscribe(() => {\r\n        this.isAnimating.set(true);\r\n      });\r\n\r\n    this.animationController.onAnimationEnd\r\n      .pipe(takeUntilDestroyed(this.destroyRef))\r\n      .subscribe(() => {\r\n        this.isAnimating.set(false);\r\n      });\r\n\r\n    this.animationController.onStepChange\r\n      .pipe(takeUntilDestroyed(this.destroyRef))\r\n      .subscribe(({ step, total }) => {\r\n        this.currentStep.set(`Step ${step} of ${total}`);\r\n      });\r\n\r\n    // Cleanup on destroy\r\n    this.destroyRef.onDestroy(() => {\r\n      const container = this.mapContainer();\r\n      if (container && container.nativeElement) {\r\n        this.geoZoom.destroy(container.nativeElement);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handle projection change events - re-render the map\r\n   */\r\n  private handleProjectionChange(): void {\r\n    if (this.renderContext && this.projection) {\r\n      const data = this.geoDataSignal();\r\n      if (data) {\r\n        // Update projection in render context\r\n        this.mapRenderer.updateProjection(this.renderContext, this.projection);\r\n\r\n        // Re-render data with updated projection\r\n        this.renderData(data);\r\n\r\n        // Re-render tissot overlay if enabled, clear it when disabled\r\n        // IMPORTANT: See note above about winding order requirement for Tissot circles\r\n        if (this.showTissot() && this.renderContext) {\r\n          const tgeo = this.tissotGeoJson() || (sampleTissotFixed as FeatureCollection);\r\n          if (tgeo) {\r\n            this.mapRenderer.renderGeoJson(this.renderContext, tgeo, {\r\n              layer: 'tissot',\r\n              style: { fill: 'coral', stroke: 'none', fillOpacity: 0.25 },\r\n            });\r\n          }\r\n        } else if (this.renderContext) {\r\n          // Clear tissot layer when disabled\r\n          this.mapRenderer.clearLayer(this.renderContext, 'tissot');\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render GeoJSON data\r\n   */\r\n  renderData(data: FeatureCollection): void {\r\n    if (this.renderContext) {\r\n      this.mapRenderer.renderGeoJson(this.renderContext, data);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update GeoJSON data\r\n   */\r\n  updateData(data: FeatureCollection): void {\r\n    this.geoDataSignal.set(data);\r\n    this.renderData(data);\r\n  }\r\n\r\n  /**\r\n   * Play animation sequence\r\n   */\r\n  playAnimation(sequence: AnimationSequence): void {\r\n    const container = this.mapContainer();\r\n    if (container) {\r\n      this.animationController.playSequence(container.nativeElement, sequence);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop animation\r\n   */\r\n  stopAnimation(): void {\r\n    this.animationController.stop();\r\n  }\r\n\r\n  /**\r\n   * Pause animation\r\n   */\r\n  pauseAnimation(): void {\r\n    this.animationController.pause();\r\n  }\r\n\r\n  /**\r\n   * Resume animation\r\n   */\r\n  resumeAnimation(): void {\r\n    const container = this.mapContainer();\r\n    if (container) {\r\n      this.animationController.resume(container.nativeElement);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Reset zoom to initial state\r\n   */\r\n  resetZoom(): void {\r\n    this.geoZoom.reset();\r\n  }\r\n\r\n  /**\r\n   * Zoom to specific scale\r\n   */\r\n  zoomTo(scale: number, duration: number = 750): void {\r\n    this.geoZoom.setScale(scale);\r\n  }\r\n\r\n  /**\r\n   * Pan to specific coordinates\r\n   */\r\n  panTo(coordinates: [number, number], duration: number = 750): void {\r\n    this.geoZoom.animateTo(coordinates, this.geoZoom.getCurrentState().scale, duration);\r\n  }\r\n\r\n  /**\r\n   * Zoom to extent (center and scale to fit bounds)\r\n   */\r\n  zoomToExtent(bounds: [[number, number], [number, number]], duration: number = 750): void {\r\n    // Calculate center of bounds\r\n    const center: [number, number] = [\r\n      (bounds[0][0] + bounds[1][0]) / 2,\r\n      (bounds[0][1] + bounds[1][1]) / 2,\r\n    ];\r\n\r\n    // For now, use a fixed scale - can be improved to calculate optimal scale\r\n    this.geoZoom.animateTo(center, 2, duration);\r\n  }\r\n}\r\n",
            "styleUrl": "./map-container.component.scss",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [],
                "line": 64
            },
            "extends": [],
            "implements": [
                "AfterViewInit"
            ],
            "templateData": "<div class=\"map-wrapper\">\r\n  <div #mapContainer class=\"map-container\"></div>\r\n\r\n  <div class=\"map-info\">\r\n    @if (isAnimating()) {\r\n      <div class=\"animation-status\">\r\n        <span class=\"status-indicator\"></span>\r\n        <span>{{ currentStep() }}</span>\r\n      </div>\r\n    }\r\n\r\n    @if (currentFps() > 0) {\r\n      <div class=\"fps-counter\" [class.fps-warning]=\"currentFps() < 23\">\r\n        FPS: {{ currentFps() }}\r\n      </div>\r\n    }\r\n  </div>\r\n</div>\r\n"
        },
        {
            "name": "PageComponent",
            "id": "component-PageComponent-79bfb042a722f49579739dfd01d8f1b67681d0272a72a283c14edeb22f0462775c80ba4f7c1eb0fa4bd5fa1844083da0140980e75b5500cd98cc26421ec6d569",
            "file": "src/stories/page.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "storybook-page",
            "styleUrls": [
                "./page.css"
            ],
            "styles": [],
            "template": "<article>  <storybook-header\n    [user]=\"user\"\n    (onLogout)=\"doLogout()\"\n    (onLogin)=\"doLogin()\"\n    (onCreateAccount)=\"doCreateAccount()\"\n  ></storybook-header>\n  <section class=\"storybook-page\">\n    <h2>Pages in Storybook</h2>\n    <p>\n      We recommend building UIs with a\n      <a href=\"https://componentdriven.org\" target=\"_blank\" rel=\"noopener noreferrer\">\n        <strong>component-driven</strong>\n      </a>\n      process starting with atomic components and ending with pages.\n    </p>\n    <p>\n      Render pages with mock data. This makes it easy to build and review page states without\n      needing to navigate to them in your app. Here are some handy patterns for managing page data\n      in Storybook:\n    </p>\n    <ul>\n      <li>\n        Use a higher-level connected component. Storybook helps you compose such data from the\n        \"args\" of child component stories\n      </li>\n      <li>\n        Assemble data in the page component from your services. You can mock these services out\n        using Storybook.\n      </li>\n    </ul>\n    <p>\n      Get a guided tutorial on component-driven development at\n      <a href=\"https://storybook.js.org/tutorials/\" target=\"_blank\" rel=\"noopener noreferrer\">\n        Storybook tutorials\n      </a>\n      . Read more in the\n      <a href=\"https://storybook.js.org/docs\" target=\"_blank\" rel=\"noopener noreferrer\"> docs </a>\n      .\n    </p>\n    <div class=\"tip-wrapper\">\n      <span class=\"tip\">Tip</span> Adjust the width of the canvas with the\n      <svg width=\"10\" height=\"10\" viewBox=\"0 0 12 12\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <path\n            d=\"M1.5 5.2h4.8c.3 0 .5.2.5.4v5.1c-.1.2-.3.3-.4.3H1.4a.5.5 0 01-.5-.4V5.7c0-.3.2-.5.5-.5zm0-2.1h6.9c.3 0 .5.2.5.4v7a.5.5 0 01-1 0V4H1.5a.5.5 0 010-1zm0-2.1h9c.3 0 .5.2.5.4v9.1a.5.5 0 01-1 0V2H1.5a.5.5 0 010-1zm4.3 5.2H2V10h3.8V6.2z\"\n            id=\"a\"\n            fill=\"#999\"\n          />\n        </g>\n      </svg>\n      Viewports addon in the toolbar\n    </div>\n  </section>\n</article>",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "user",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "User | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 69
                }
            ],
            "methodsClass": [
                {
                    "name": "doCreateAccount",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 79,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "doLogin",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 75,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "doLogout",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 71,
                    "deprecated": false,
                    "deprecationMessage": ""
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "HeaderComponent",
                    "type": "component"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { HeaderComponent } from './header.component';\r\nimport type { User } from './user';\r\n\r\n@Component({\r\n  selector: 'storybook-page',\r\n  standalone: true,\r\n  imports: [CommonModule, HeaderComponent],\r\n  template: `<article>\r\n  <storybook-header\r\n    [user]=\"user\"\r\n    (onLogout)=\"doLogout()\"\r\n    (onLogin)=\"doLogin()\"\r\n    (onCreateAccount)=\"doCreateAccount()\"\r\n  ></storybook-header>\r\n  <section class=\"storybook-page\">\r\n    <h2>Pages in Storybook</h2>\r\n    <p>\r\n      We recommend building UIs with a\r\n      <a href=\"https://componentdriven.org\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n        <strong>component-driven</strong>\r\n      </a>\r\n      process starting with atomic components and ending with pages.\r\n    </p>\r\n    <p>\r\n      Render pages with mock data. This makes it easy to build and review page states without\r\n      needing to navigate to them in your app. Here are some handy patterns for managing page data\r\n      in Storybook:\r\n    </p>\r\n    <ul>\r\n      <li>\r\n        Use a higher-level connected component. Storybook helps you compose such data from the\r\n        \"args\" of child component stories\r\n      </li>\r\n      <li>\r\n        Assemble data in the page component from your services. You can mock these services out\r\n        using Storybook.\r\n      </li>\r\n    </ul>\r\n    <p>\r\n      Get a guided tutorial on component-driven development at\r\n      <a href=\"https://storybook.js.org/tutorials/\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n        Storybook tutorials\r\n      </a>\r\n      . Read more in the\r\n      <a href=\"https://storybook.js.org/docs\" target=\"_blank\" rel=\"noopener noreferrer\"> docs </a>\r\n      .\r\n    </p>\r\n    <div class=\"tip-wrapper\">\r\n      <span class=\"tip\">Tip</span> Adjust the width of the canvas with the\r\n      <svg width=\"10\" height=\"10\" viewBox=\"0 0 12 12\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <g fill=\"none\" fillRule=\"evenodd\">\r\n          <path\r\n            d=\"M1.5 5.2h4.8c.3 0 .5.2.5.4v5.1c-.1.2-.3.3-.4.3H1.4a.5.5 0 01-.5-.4V5.7c0-.3.2-.5.5-.5zm0-2.1h6.9c.3 0 .5.2.5.4v7a.5.5 0 01-1 0V4H1.5a.5.5 0 010-1zm0-2.1h9c.3 0 .5.2.5.4v9.1a.5.5 0 01-1 0V2H1.5a.5.5 0 010-1zm4.3 5.2H2V10h3.8V6.2z\"\r\n            id=\"a\"\r\n            fill=\"#999\"\r\n          />\r\n        </g>\r\n      </svg>\r\n      Viewports addon in the toolbar\r\n    </div>\r\n  </section>\r\n</article>`,\r\n  styleUrls: ['./page.css'],\r\n})\r\nexport class PageComponent {\r\n  user: User | null = null;\r\n\r\n  doLogout() {\r\n    this.user = null;\r\n  }\r\n\r\n  doLogin() {\r\n    this.user = { name: 'Jane Doe' };\r\n  }\r\n\r\n  doCreateAccount() {\r\n    this.user = { name: 'Jane Doe' };\r\n  }\r\n}\r\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ".storybook-page {\r\n  margin: 0 auto;\r\n  padding: 48px 20px;\r\n  max-width: 600px;\r\n  color: #333;\r\n  font-size: 14px;\r\n  line-height: 24px;\r\n  font-family: 'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\r\n}\r\n\r\n.storybook-page h2 {\r\n  display: inline-block;\r\n  vertical-align: top;\r\n  margin: 0 0 4px;\r\n  font-weight: 700;\r\n  font-size: 32px;\r\n  line-height: 1;\r\n}\r\n\r\n.storybook-page p {\r\n  margin: 1em 0;\r\n}\r\n\r\n.storybook-page a {\r\n  color: inherit;\r\n}\r\n\r\n.storybook-page ul {\r\n  margin: 1em 0;\r\n  padding-left: 30px;\r\n}\r\n\r\n.storybook-page li {\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.storybook-page .tip {\r\n  display: inline-block;\r\n  vertical-align: top;\r\n  margin-right: 10px;\r\n  border-radius: 1em;\r\n  background: #e7fdd8;\r\n  padding: 4px 12px;\r\n  color: #357a14;\r\n  font-weight: 700;\r\n  font-size: 11px;\r\n  line-height: 12px;\r\n}\r\n\r\n.storybook-page .tip-wrapper {\r\n  margin-top: 40px;\r\n  margin-bottom: 40px;\r\n  font-size: 13px;\r\n  line-height: 20px;\r\n}\r\n\r\n.storybook-page .tip-wrapper svg {\r\n  display: inline-block;\r\n  vertical-align: top;\r\n  margin-top: 3px;\r\n  margin-right: 4px;\r\n  width: 12px;\r\n  height: 12px;\r\n}\r\n\r\n.storybook-page .tip-wrapper svg path {\r\n  fill: #1ea7fd;\r\n}\r\n",
                    "styleUrl": "./page.css"
                }
            ],
            "stylesData": "",
            "extends": []
        }
    ],
    "modules": [],
    "miscellaneous": {
        "variables": [
            {
                "name": "appConfig",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/app.config.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "ApplicationConfig",
                "defaultValue": "{\r\n  providers: [\r\n    provideBrowserGlobalErrorListeners(),\r\n    provideRouter(routes)\r\n  ]\r\n}"
            },
            {
                "name": "routes",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/app.routes.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "Routes",
                "defaultValue": "[]"
            }
        ],
        "functions": [],
        "typealiases": [
            {
                "name": "RenderMode",
                "ctype": "miscellaneous",
                "subtype": "typealias",
                "rawtype": "\"svg\" | \"canvas\"",
                "file": "src/app/components/map-container/models/map.types.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "",
                "kind": 193
            }
        ],
        "enumerations": [],
        "groupedVariables": {
            "src/app/app.config.ts": [
                {
                    "name": "appConfig",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/app.config.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ApplicationConfig",
                    "defaultValue": "{\r\n  providers: [\r\n    provideBrowserGlobalErrorListeners(),\r\n    provideRouter(routes)\r\n  ]\r\n}"
                }
            ],
            "src/app/app.routes.ts": [
                {
                    "name": "routes",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/app.routes.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Routes",
                    "defaultValue": "[]"
                }
            ]
        },
        "groupedFunctions": {},
        "groupedEnumerations": {},
        "groupedTypeAliases": {
            "src/app/components/map-container/models/map.types.ts": [
                {
                    "name": "RenderMode",
                    "ctype": "miscellaneous",
                    "subtype": "typealias",
                    "rawtype": "\"svg\" | \"canvas\"",
                    "file": "src/app/components/map-container/models/map.types.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "",
                    "kind": 193
                }
            ]
        }
    },
    "routes": {
        "name": "<root>",
        "kind": "module",
        "children": []
    },
    "coverage": {
        "count": 14,
        "status": "low",
        "files": [
            {
                "filePath": "src/app/app.config.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "appConfig",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/app.routes.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "routes",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/app.ts",
                "type": "component",
                "linktype": "component",
                "name": "App",
                "coveragePercent": 16,
                "coverageCount": "2/12",
                "status": "low"
            },
            {
                "filePath": "src/app/components/map-container/map-container.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "MapContainerComponent",
                "coveragePercent": 37,
                "coverageCount": "13/35",
                "status": "medium"
            },
            {
                "filePath": "src/app/components/map-container/models/map.types.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "AnimationConfig",
                "coveragePercent": 0,
                "coverageCount": "0/3",
                "status": "low"
            },
            {
                "filePath": "src/app/components/map-container/models/map.types.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "GeoBounds",
                "coveragePercent": 0,
                "coverageCount": "0/5",
                "status": "low"
            },
            {
                "filePath": "src/app/components/map-container/models/map.types.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "MapConfig",
                "coveragePercent": 0,
                "coverageCount": "0/5",
                "status": "low"
            },
            {
                "filePath": "src/app/components/map-container/models/map.types.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "MapData",
                "coveragePercent": 0,
                "coverageCount": "0/3",
                "status": "low"
            },
            {
                "filePath": "src/app/components/map-container/models/map.types.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "MapExtent",
                "coveragePercent": 0,
                "coverageCount": "0/3",
                "status": "low"
            },
            {
                "filePath": "src/app/components/map-container/models/map.types.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "ZoomConfig",
                "coveragePercent": 0,
                "coverageCount": "0/3",
                "status": "low"
            },
            {
                "filePath": "src/app/components/map-container/models/map.types.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "ZoomEvent",
                "coveragePercent": 0,
                "coverageCount": "0/4",
                "status": "low"
            },
            {
                "filePath": "src/app/components/map-container/models/map.types.ts",
                "type": "type alias",
                "linktype": "miscellaneous",
                "linksubtype": "typealias",
                "name": "RenderMode",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/components/map-container/services/animation-controller.service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "AnimationControllerService",
                "coveragePercent": 56,
                "coverageCount": "14/25",
                "status": "good"
            },
            {
                "filePath": "src/app/components/map-container/services/animation-controller.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "AnimationSequence",
                "coveragePercent": 0,
                "coverageCount": "0/3",
                "status": "low"
            },
            {
                "filePath": "src/app/components/map-container/services/animation-controller.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "AnimationStep",
                "coveragePercent": 0,
                "coverageCount": "0/4",
                "status": "low"
            },
            {
                "filePath": "src/app/components/map-container/services/geo-zoom.service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "GeoZoomService",
                "coveragePercent": 36,
                "coverageCount": "17/47",
                "status": "medium"
            },
            {
                "filePath": "src/app/components/map-container/services/map-renderer.service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "MapRendererService",
                "coveragePercent": 88,
                "coverageCount": "8/9",
                "status": "very-good"
            },
            {
                "filePath": "src/app/components/map-container/services/map-renderer.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "RenderContext",
                "coveragePercent": 0,
                "coverageCount": "0/6",
                "status": "low"
            },
            {
                "filePath": "src/stories/button.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "ButtonComponent",
                "coveragePercent": 83,
                "coverageCount": "5/6",
                "status": "very-good"
            },
            {
                "filePath": "src/stories/header.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "HeaderComponent",
                "coveragePercent": 0,
                "coverageCount": "0/5",
                "status": "low"
            },
            {
                "filePath": "src/stories/page.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "PageComponent",
                "coveragePercent": 0,
                "coverageCount": "0/5",
                "status": "low"
            },
            {
                "filePath": "src/stories/user.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "User",
                "coveragePercent": 0,
                "coverageCount": "0/2",
                "status": "low"
            }
        ]
    }
}