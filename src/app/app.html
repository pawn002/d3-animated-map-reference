<div class="app-container">
  <header class="app-header">
    <h1>{{ title() }}</h1>
    <p>{{ subtitle() }}</p>
  </header>

  <main class="app-main">
    <div class="map-section">
      <app-map-container
        [width]="960"
        [height]="600"
        [renderMode]="'svg'"
        [geoData]="geoData()"
        (fpsUpdate)="handleFpsUpdate($event)"
      />
    </div>

    <aside class="controls-panel">
      <h2>Interactive Controls</h2>

      <section class="control-group">
        <h3>User Interactions</h3>
        <p class="info-text">
          • <strong>Click and drag</strong> to pan<br />
          • <strong>Scroll</strong> to zoom in/out
        </p>
        <button (click)="resetMap()" class="btn btn-secondary">Reset View</button>
      </section>

      <section class="control-group">
        <h3>Programmatic Animations</h3>
        <p class="info-text">Pre-defined animation sequences demonstrating smooth transitions</p>
        <div class="button-group">
          <button (click)="playContinentTour()" class="btn btn-primary">
            Continent Tour
          </button>
          <button (click)="playWorldTour()" class="btn btn-primary">World Cities</button>
          <button (click)="stopAnimation()" class="btn btn-danger">Stop</button>
        </div>
      </section>

      <section class="control-group">
        <h3>Performance</h3>
        @if (currentFps() > 0) {
          <div class="performance-indicator" [class.fps-good]="currentFps() >= 23">
            <span class="fps-value">{{ currentFps() }} FPS</span>
            <span class="fps-status">
              {{ currentFps() >= 23 ? '✓ Target Met (>23fps)' : '⚠ Below Target' }}
            </span>
          </div>
        } @else {
          <p class="info-text">Start an animation to monitor FPS</p>
        }
      </section>

      <section class="control-group">
        <h3>Technical Details</h3>
        <ul class="tech-list">
          <li><strong>Projection:</strong> Equirectangular (flat)</li>
          <li><strong>Renderer:</strong> SVG (Canvas-ready)</li>
          <li><strong>Data Format:</strong> GeoJSON</li>
          <li><strong>Framework:</strong> Angular + D3</li>
        </ul>
      </section>
    </aside>
  </main>

  <footer class="app-footer">
    <p>
      Reference implementation for D3 animated maps with proper projection • Inspired by
      <a href="https://github.com/vasturiano/d3-geo-zoom" target="_blank" rel="noopener"
        >d3-geo-zoom</a
      >
    </p>
  </footer>
</div>

<router-outlet />
