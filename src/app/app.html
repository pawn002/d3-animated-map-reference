<a href="#main-content" class="skip-to-main">Skip to main content</a>

<div class="app-container">
  <header class="app-header">
    <div class="header-content">
      <h1>{{ title() }}</h1>
      <p>{{ subtitle() }}</p>
    </div>
  </header>

  <main id="main-content" class="app-main">
    <aside class="left-panel">
      <app-controls-panel
        [renderMode]="renderMode()"
        [showTissot]="showTissot()"
        (jumpToLocation)="handleJumpToLocation($event)"
        (playAnimation)="handlePlayAnimation($event)"
        (stopAnimation)="handleStopAnimation()"
        (resetView)="handleResetView()"
        (uploadDataset)="handleUploadDataset($event)"
        (switchDataset)="handleSwitchDataset($event)"
        (toggleTissot)="handleToggleTissot($event)"
        (changeRenderMode)="handleChangeRenderMode($event)"
      />
    </aside>

    <div class="map-section">
      @if (geoData(); as data) {
        <app-map-container
          [width]="mapWidth()"
          [height]="mapHeight()"
          [renderMode]="renderMode()"
          [geoData]="data"
          [showTissot]="showTissot()"
          (fpsUpdate)="handleFpsUpdate($event)"
          (zoomChange)="handleZoomChange($event)"
        />
      }
    </div>

    <aside class="right-panel">
      <app-metrics-panel
        [metrics]="performanceMetrics()"
        [viewInfo]="viewInfo()"
        [animationStatus]="animationStatus()"
        [renderMode]="renderMode()"
        [featureCount]="featureCount"
        (resetView)="handleResetView()"
        (zoomIn)="handleZoomIn()"
        (zoomOut)="handleZoomOut()"
      />
    </aside>
  </main>

  <footer class="app-footer">
    <p>
      Modern D3.js animated map demo with Angular â€¢
      <a href="https://github.com/anthropics/claude-code" target="_blank" rel="noopener">
        Built with Claude Code
      </a>
    </p>
  </footer>
</div>

<router-outlet />
